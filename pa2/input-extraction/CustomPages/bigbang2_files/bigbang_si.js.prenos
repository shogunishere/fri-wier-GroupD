
(function () {
    // See the Frosmo Core header for more details
    var _frosmoNamespace = 'frosmo';
    var _frosmoInternalNamespace = '_frosmo';
    var _frosmoScriptNamespace = '';

    try {
        _frosmoScriptNamespace = window.document.currentScript.getAttribute('data-namespace') || '';
        if (_frosmoScriptNamespace) {
            _frosmoNamespace += _frosmoScriptNamespace
            _frosmoInternalNamespace += _frosmoScriptNamespace;
        }
    } catch (ex) {
        // Ignore the error, as this should only occur on IE
    }

    var frosmo = window[_frosmoNamespace] = window[_frosmoNamespace] || {};
    var _frosmo = window[_frosmoInternalNamespace] = window[_frosmoInternalNamespace] || {};
    // var easy = frosmo.easy = frosmo.easy || {};
    var _config = {"thirdParty":true,"anchorEnabled":0,"api":{"domain":"\/\/inpref.com\/","fcp":"https:\/\/admin.inpref.com","origin":"bigbang_si","region":"eu"},"comparisonGroupRatio":0.1,"sharedContext":0,"requestMessages":true,"dataLayer":1,"baseUrl":"\/\/d2wzl9lnvjz3bh.cloudfront.net\/","segments":[],"segmentGroups":[],"segmentsV2":{"sgmt_60434":{"name":"sgmt_60434","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8560]],"id":"d2fb7e918a474aa1d402d6f6628769e8","counterIds":["d384ecd6aa549e2efd4ef0f1efbeb95b"]}],"segmentGroupId":7599,"rules":["and",["or",[">=",["get-trigger-count","d384ecd6aa549e2efd4ef0f1efbeb95b",1],1]]]},"sgmt_60435":{"name":"sgmt_60435","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8559]],"id":"ba7e184d61dce27d98ded1a9dfd4630a","counterIds":["0ace282eb62b9211ab0cce9182ab62bb"]}],"segmentGroupId":7599,"rules":["and",["or",[">=",["get-trigger-count","0ace282eb62b9211ab0cce9182ab62bb",14],1]]]},"sgmt_60436":{"name":"sgmt_60436","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":7600,"rules":["and",["or",["eq?",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",14],1]]]},"sgmt_60437":{"name":"sgmt_60437","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"View Product"]],"id":"cd18d07db93c12a1b4321cf93fb6ddc4","counterIds":["a65a20cd3909eaa38b0f2d6a003eaa72"]}],"segmentGroupId":7600,"rules":["and",["or",[">=",["get-trigger-count","a65a20cd3909eaa38b0f2d6a003eaa72",7],1]]]},"sgmt_60438":{"name":"sgmt_60438","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Add-to-cart Product"]],"id":"8368b88d29235f549abecabc59b55cd7","counterIds":["4d94017b83490b11da5b2347a66623c3"]}],"segmentGroupId":7600,"rules":["and",["or",[">=",["get-trigger-count","4d94017b83490b11da5b2347a66623c3",1],1]]]},"sgmt_60439":{"name":"sgmt_60439","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"Buy Product"]],"id":"f2db607982b235b5870aef79e6cd542d","counterIds":["5456a4b7462820d0f755586dbd7ece9e"]}],"segmentGroupId":7600,"rules":["and",["or",[">=",["get-trigger-count","5456a4b7462820d0f755586dbd7ece9e",14],1]]]},"sgmt_60440":{"name":"sgmt_60440","triggers":[{"on_event":"visit","rules":[],"id":"d4ff14b8d7e54bdf24affe4eb3dffe66","counterIds":["e6551101adfdf1c29b02ada2d9e71f21"]}],"segmentGroupId":7601,"rules":["and",["or",[">=",["get-trigger-count","e6551101adfdf1c29b02ada2d9e71f21",2],3]]]},"sgmt_60441":{"name":"sgmt_60441","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8560]],"id":"d2fb7e918a474aa1d402d6f6628769e8","counterIds":["d384ecd6aa549e2efd4ef0f1efbeb95b"]}],"segmentGroupId":7601,"rules":["and",["or",[">=",["get-trigger-count","d384ecd6aa549e2efd4ef0f1efbeb95b",2],10]]]},"sgmt_60442":{"name":"sgmt_60442","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8563]],"id":"74c3ae50b9718c6b422a36eaf67aa53a","counterIds":["e15f73a8e5acf7942ff7676e9a5605a8"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8564]],"id":"d441a4161c2e5fce10efef29ea2cc83f","counterIds":["c3d9902c360d6d83ebebc669426f8040"]}],"segmentGroupId":7602,"rules":["and",["and",[">=",["get-trigger-count","e15f73a8e5acf7942ff7676e9a5605a8",7],1],[">=",["get-trigger-count","c3d9902c360d6d83ebebc669426f8040",7],1]]]},"sgmt_60443":{"name":"sgmt_60443","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8562]],"id":"c406de4f230b95dc431a35744592c811","counterIds":["5a3d6561f0c3754d518fb053e8e9a645"]},{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8564]],"id":"d441a4161c2e5fce10efef29ea2cc83f","counterIds":["c3d9902c360d6d83ebebc669426f8040"]}],"segmentGroupId":7602,"rules":["and",["and",[">=",["get-trigger-count","5a3d6561f0c3754d518fb053e8e9a645",7],1],[">=",["get-trigger-count","c3d9902c360d6d83ebebc669426f8040",7],1]]]},"sgmt_60444":{"name":"sgmt_60444","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"View Category"],["in",["get-event-data","value"],["array","Food\/Fruits","Food\/Vegetables"]]],"id":"f59e4d4c5ad6477fe08aa17c1bcc0bc6","counterIds":["b4e4d1aebcdaefde82594eb5ba51a84c"]}],"segmentGroupId":7603,"rules":["and",["or",[">=",["get-trigger-count","b4e4d1aebcdaefde82594eb5ba51a84c",14],3]]]},"sgmt_60445":{"name":"sgmt_60445","triggers":[{"on_event":"customAction","rules":["and",["eq?",["get-event-data","name"],"View Brand"],["in",["get-event-data","value"],["array","Wakita"]]],"id":"74e13361c009d488c8e91e471d2f133e","counterIds":["ad6f3397e9c1fa02bd3f54e52cab219c"]}],"segmentGroupId":7603,"rules":["and",["or",[">=",["get-trigger-count","ad6f3397e9c1fa02bd3f54e52cab219c",14],3]]]},"sgmt_60446":{"name":"sgmt_60446","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8565]],"id":"a9cb8f043d015ee308453a553cdaf82e","counterIds":["fc29ba5d16f4df6c34a9480b48da06b2"]}],"segmentGroupId":7603,"rules":["and",["or",[">=",["get-trigger-count","fc29ba5d16f4df6c34a9480b48da06b2",14],3]]]},"sgmt_60449":{"name":"sgmt_60449","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8571]],"id":"65b558904d4b985b0a487295e5f3a893","counterIds":["f34a015d4f2f41e07c5ab3e98f98083c"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","f34a015d4f2f41e07c5ab3e98f98083c",1],1]]]},"sgmt_60450":{"name":"sgmt_60450","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8574]],"id":"6a6a17d369d11a0bc4aa9c4d80fb83ec","counterIds":["2ed4b75091bdfd8d54347740c9d88c51"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","2ed4b75091bdfd8d54347740c9d88c51",1],1]]]},"sgmt_60624":{"name":"sgmt_60624","triggers":[{"on_event":"product.purchase","rules":["and",["in",["get-event-data","id"],["array","681051","679835","678721","673942","681666","20394907","620034","692438","700912","20395029","20395028","690923","701659","20395027","700913","693217","691923","690135","687350","686748","683006","620033","619863","620031","678726","680167","681235","678989","679836","679770","681600","687258","687340","684394","679036","678858","679567"]]],"id":"f3da9ccd6b597080fa1a3f53eec162b0","counterIds":["17cf88557405cd16f3396b9ea8c3d1ce"]}],"segmentGroupId":null,"rules":["and",["or",[">=",["get-trigger-count","17cf88557405cd16f3396b9ea8c3d1ce",365],1]]]},"sgmt_61145":{"name":"sgmt_61145","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],10119]],"id":"4223e48e1a248da9950d754d98ba987d","counterIds":["f6733a641e6861f91c2240eab69e558f"]},{"on_event":"scriptLoad","rules":["begins",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/bela-tehnika"],"id":"dc80a2f941ed6c73f1db49a6ceed039f","counterIds":["a9453c1651e012ce71bfede43185e95d"]}],"segmentGroupId":7777,"rules":["or",["or",[">=",["get-trigger-count","f6733a641e6861f91c2240eab69e558f",30],1]],["or",[">=",["get-trigger-count","a9453c1651e012ce71bfede43185e95d",30],1]]]},"sgmt_61146":{"name":"sgmt_61146","triggers":[{"on_event":"trigger.fire","rules":["and",["eq?",["get-event-data","id"],8570]],"id":"f408983b05d1add10254d0b0a312361f","counterIds":["60019f277c938cac01bd472abd789fd2"]}],"segmentGroupId":7777,"rules":["and",["or",[">=",["get-trigger-count","60019f277c938cac01bd472abd789fd2",365],1]]]}},"segmentCountersV2":{"d384ecd6aa549e2efd4ef0f1efbeb95b":{"timelimit":2,"frequency":"everytime"},"0ace282eb62b9211ab0cce9182ab62bb":{"timelimit":14,"frequency":"everytime"},"e6551101adfdf1c29b02ada2d9e71f21":{"timelimit":2,"frequency":"everytime"},"a65a20cd3909eaa38b0f2d6a003eaa72":{"timelimit":7,"frequency":"everytime"},"4d94017b83490b11da5b2347a66623c3":{"timelimit":1,"frequency":"everytime"},"5456a4b7462820d0f755586dbd7ece9e":{"timelimit":14,"frequency":"everytime"},"e15f73a8e5acf7942ff7676e9a5605a8":{"timelimit":7,"frequency":"everytime"},"c3d9902c360d6d83ebebc669426f8040":{"timelimit":7,"frequency":"everytime"},"5a3d6561f0c3754d518fb053e8e9a645":{"timelimit":7,"frequency":"everytime"},"b4e4d1aebcdaefde82594eb5ba51a84c":{"timelimit":14,"frequency":"everytime"},"ad6f3397e9c1fa02bd3f54e52cab219c":{"timelimit":14,"frequency":"everytime"},"fc29ba5d16f4df6c34a9480b48da06b2":{"timelimit":14,"frequency":"everytime"},"f34a015d4f2f41e07c5ab3e98f98083c":{"timelimit":1,"frequency":"everytime"},"2ed4b75091bdfd8d54347740c9d88c51":{"timelimit":1,"frequency":"everytime"},"17cf88557405cd16f3396b9ea8c3d1ce":{"timelimit":365,"frequency":"everytime"},"f6733a641e6861f91c2240eab69e558f":{"timelimit":30,"frequency":"everytime"},"a9453c1651e012ce71bfede43185e95d":{"timelimit":30,"frequency":"everytime"},"60019f277c938cac01bd472abd789fd2":{"timelimit":365,"frequency":"everytime"}},"segmentGroupsV2":{"sggp_7600":{"segments":["sgmt_60436","sgmt_60437","sgmt_60438","sgmt_60439"],"mode":"radio"},"sggp_7603":{"segments":["sgmt_60444","sgmt_60445","sgmt_60446"],"mode":"radio"}},"pages":[],"forms":[],"links":[],"meta":[],"landingPages":[],"positions":[{"position":29249,"name":"Home page - Recommendation 1","elementId":".cw.wrapper .cw-section:nth-of-type(1)","method":"replace","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]],"triggerId":8554},{"position":29250,"name":"Home page - Recommendation 2","elementId":".cw.wrapper .cw-section:nth-of-type(2)","method":"replace","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8554},{"position":29251,"name":"Sub category page - Recommendation 1","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/tv-avdio\/tv-sprejemniki\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/avdio-in-glasbila"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/bela-tehnika\/pralni-stroji\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/telefonija-in-pametne-ure\/mobilni-telefoni\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/racunalnistvo\/tablicni-racunalnik\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/fitnes-zdravje-in-dobro-pocutje\/nosljiva-tehnologija\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/grelne-in-vlazilne-naprave\/hlajenje-in-klime\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/telefonija-in-pametne-ure\/mobilni-telefoni\/pametni-mobilni-telefoni\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/racunalnistvo\/racunalniske-komponente\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/bela-tehnika\/susilni-stroji\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/bela-tehnika\/hladilniki-in-zamrzovalniki"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/sesanje-in-ciscenje\/sesalniki\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/mali-gospodinjski-aparati\/aparati-za-pripravo-hrane\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/mali-gospodinjski-aparati\/blenderji-in-mesalniki\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/mali-gospodinjski-aparati\/priprava-kave\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/osebna-nega\/zenska-nega\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/osebna-nega\/moska-nega\/"]],["not",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/racunalnistvo\/prenosni-racunalniki\/"]]],"triggerId":8556},{"position":29253,"name":"Product page - Recommendation 1","elementId":".cd-related-products.wrapper","method":"renew","selectorType":"css","rules":["and",["not",["begins",["location","path"],"\/dyson"]],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8555,"cssClasses":"frosmo-recommendation-product-1"},{"position":29254,"name":"Product page - Recommendation 2","elementId":"div[data-offer_selected_html=\"box_content\"]","method":"after","selectorType":"css","rules":["and",["not",["begins",["location","path"],"\/dyson"]],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]],"triggerId":8555},{"position":29256,"name":"Home page - Recommendation 3","elementId":".cw.wrapper .cw-section:nth-of-type(2)","method":"after","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8554},{"position":29258,"name":"Cart page - Recommendation 2","elementId":".frosmo-cart-recommendation-1","method":"after","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]],"triggerId":8568,"cssClasses":"frosmo-cart-recommendation-2"},{"position":29259,"name":"Cart page - Recommendation 1","elementId":".cart-sl","method":"hide","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8568,"cssClasses":"frosmo-cart-recommendation-1"},{"position":29301,"name":"Top category page - Recommendation - Ra\u010dunalni\u0161tvo","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/racunalnistvo\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":29357,"name":"Product page - Recommendation - Slot 1 - Dyson","elementId":".cd-related-products.wrapper","method":"replace","selectorType":"css","rules":["or",["begins",["location","path"],"\/dyson"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8555},{"position":29420,"name":"Top category page - Recommendation - Bela tehnika","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/bela-tehnika\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":29421,"name":"Top category page - Recommendation - \u0160port & prosti \u010das","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/sport-prosti-cas\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":29422,"name":"Top category page - Recommendation - Telefonija","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/telefonija-in-pametne-ure\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":29423,"name":"Top category page - Recommendation - Foto & kamere","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/foto-kamere\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":29424,"name":"Top category page - Recommendation - Dom & vrt","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/dom-vrt\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":29425,"name":"Top category page - Recommendation - TV & Avdio","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/tv-avdio\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":29426,"name":"Top category page - Recommendation - Mali gospodinjski aparati","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/mali-gospodinjski-aparati\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":29427,"name":"Top category page - Recommendation - Gaming","elementId":".c-exclude-items","method":"renew","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/gaming\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":29603,"name":"Product page - Recommendation 2 - Dyson","elementId":"div[data-offer_selected_html=\"box_content\"]","method":"after","selectorType":"css","rules":["or",["begins",["location","path"],"\/dyson"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]],"triggerId":8555},{"position":30242,"name":"Instant search - Recommendation - Slot 1","elementId":".fr-search-recos-1","method":"replace","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.si"]]]},{"position":30243,"name":"Elastic Search (Client's search)","elementId":".autocomplete-container","method":"hide","selectorType":"css","rules":[]},{"position":30244,"name":"Instant search - Recommendation - Slot 2","elementId":".fr-search-recos-2","method":"replace","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbang.si"]]]},{"position":30245,"name":"Instant search","elementId":"#main_search","method":"after","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbang.si"]]]},{"position":31740,"name":"Top category page - Recommendation - Avto, Moto & GPS","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/avto-moto-in-gps\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":31741,"name":"Top category page - Recommendation - Avdio & Glasbila","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/avdio-in-glasbila\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":31742,"name":"Top category page - Recommendation - Sesanje & \u010di\u0161\u010denje","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/sesanje-in-ciscenje\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":31743,"name":"Top category page - Recommendation - Likanje in \u0161ivanje","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/likanje-in-sivanje\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":31744,"name":"Top category page - Recommendation - Ogrevanje, hlajenje & kvaliteta zraka","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/grelne-in-vlazilne-naprave\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":31745,"name":"Top category page - Recommendation - Osebna nega","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/osebna-nega\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":31746,"name":"Top category page - Recommendation - Pametni dom","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/pametni-dom\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":31747,"name":"Top category page - Recommendation - Fitnes, Zdravje & Dobro po\u010dutje","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/fitnes-zdravje-in-dobro-pocutje\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":31748,"name":"Top category page - Recommendation - Vse za otroke in star\u0161e","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/vse-za-otroke\/"],["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]]},{"position":31749,"name":"Top category page - Recommendation - Pisarna & poslovni prostori","elementId":".c-categories-wrapper","method":"after","selectorType":"css","rules":["and",["eq?",["location","path"],"\/izdelki\/pisarna-in-poslovni-prostori\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":31906,"name":"Sub category page - Recommendation 1 (Televizorji)","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/tv-avdio\/tv-sprejemniki\/"]],"triggerId":8556},{"position":31911,"name":"[AB: Prenosni ra\u010dunalniki] Sub category page - Recommendation 1","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/racunalniski-dodatki\/prenosni-racunalniki\/"]],"triggerId":8556},{"position":32293,"name":"Sub category page - Recommendation 1 - Slu\u0161alke","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/avdio-in-glasbila\/slusalke\/"]],"triggerId":8556},{"position":32294,"name":"Sub category page - Recommendation 1 - Zvo\u010dne postaje","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/avdio-in-glasbila\/zvocne-postaje\/"]],"triggerId":8556},{"position":32295,"name":"Sub category page - Recommendation 1 - Pralni stroji","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/bela-tehnika\/pralni-stroji\/"]],"triggerId":8556},{"position":32296,"name":"Sub category page - Recommendation 1 - mobilni telefoni","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/telefonija-in-pametne-ure\/mobilni-telefoni\/"]],"triggerId":8556},{"position":32297,"name":"Sub category page - Recommendation 1 - tablice","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/racunalnistvo\/tablicni-racunalnik\/"]],"triggerId":8556},{"position":32301,"name":"Sub category page - Recommendation 1 - pametne ure","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/fitnes-zdravje-in-dobro-pocutje\/nosljiva-tehnologija\/"]],"triggerId":8556},{"position":32302,"name":"Sub category page - Recommendation 1 - klime","elementId":".c-main.lvl2 .wrapper .c-header","method":"after","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/grelne-in-vlazilne-naprave\/hlajenje-in-klime\/"]],"triggerId":8556},{"position":32550,"name":"Top sub-category page - Recommendation - Ra\u010dunalni\u0161ke komponente","elementId":".c-main.lvl2 .wrapper .c-header","method":"replace","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/racunalnistvo\/racunalniske-komponente\/"],["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]]},{"position":32608,"name":"Black Friday Reco - pralni stroj","elementId":".c-categories","method":"prepend","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/bela-tehnika\/pralni-stroji\/"]],"triggerId":8556},{"position":32618,"name":"Black Friday Reco - hladilnik","elementId":".c-categories","method":"prepend","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/bela-tehnika\/hladilniki-in-zamrzovalniki"]],"triggerId":8556},{"position":32619,"name":"Copy of Black Friday Reco - su\u0161ilni stroj","elementId":".c-categories","method":"prepend","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/bela-tehnika\/susilni-stroji\/"]],"triggerId":8556},{"position":32816,"name":"Page Body (Exit Intent)","elementId":"#__nuxt","method":"prepend","selectorType":"css","rules":[],"triggerId":8570},{"position":32988,"name":"naj izdelki_TV","elementId":".c-header","method":"after","selectorType":"css","rules":["and",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/naj-tv-2023-katalog\/"]]},{"position":32989,"name":"naj izdelki_BT","elementId":".c-header","method":"after","selectorType":"css","rules":["and",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/naj-bela-tehnika-2023-katalog\/"]]},{"position":32991,"name":"naj izdelki_MGA","elementId":".c-header","method":"after","selectorType":"css","rules":["and",["contains",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/naj-mga-2023-katalog\/"]]},{"position":32696,"name":"Black Friday Reco - ra\u010dunalnik","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/racunalnistvo\/prenosni-racunalniki\/"]],"triggerId":8556},{"position":32695,"name":"Black Friday Reco - tabli\u010dni","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/racunalnistvo\/tablicni-racunalnik\/"]],"triggerId":8556},{"position":32694,"name":"Black Friday Reco - TV","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/tv-avdio\/tv-sprejemniki\/"]],"triggerId":8556},{"position":32693,"name":"Black Friday Reco - mo\u0161ka nega","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/osebna-nega\/moska-nega\/"]],"triggerId":8556},{"position":32692,"name":"Black Friday Reco - \u017eenska nega","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/osebna-nega\/zenska-nega\/"]],"triggerId":8556},{"position":32691,"name":"Black Friday Reco - priprava kave","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/mali-gospodinjski-aparati\/priprava-kave\/"]],"triggerId":8556},{"position":32690,"name":"Black Friday Reco - priprava hrane","elementId":".c-main-items","method":"before","selectorType":"css","rules":["or",["contains",["location","path"],"\/izdelki\/mali-gospodinjski-aparati\/blenderji-in-mesalniki\/"],["contains",["location","href"],"\/izdelki\/mali-gospodinjski-aparati\/aparati-za-pripravo-hrane\/"]],"triggerId":8556},{"position":32689,"name":"Black Friday Reco - sesanje","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/sesanje-in-ciscenje\/sesalniki\/"]],"triggerId":8556},{"position":32688,"name":"Black Friday Reco - mobile","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/telefonija-in-pametne-ure\/mobilni-telefoni\/pametni-mobilni-telefoni"]],"triggerId":8556},{"position":32687,"name":"Black Friday Reco - avdio","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/avdio-in-glasbila\/zvocne-postaje\/"]],"triggerId":8556},{"position":32617,"name":"Black Friday Reco - su\u0161ilni stroj","elementId":".c-main-items","method":"before","selectorType":"css","rules":["and",["contains",["location","path"],"\/izdelki\/bela-tehnika\/susilni-stroji\/"]],"triggerId":8556},{"position":32586,"name":"Sub category page - Recommendation 1 - pametni mobilni telefoni","elementId":".c-main.lvl2 .wrapper .c-header","method":"append","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/izdelki\/telefonija-in-pametne-ure\/mobilni-telefoni\/pametni-mobilni-telefoni\/"]]},{"position":30341,"name":"Home page - Black Friday Reco","elementId":".cw.wrapper .cw-section:nth-of-type(1)","method":"before","selectorType":"css","rules":[],"triggerId":8554},{"position":30196,"name":"Digital Voucher Landing Page","elementId":"#position50","method":"before","selectorType":"css","rules":["and",["eq?",["location","href"],"https:\/\/www.bigbang.si\/digitalni-boni\/"]]},{"position":30195,"name":"Home page - Voucher Reco","elementId":".cw.wrapper .cw-section:nth-of-type(1)","method":"before","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbang.marker"]],["not",["contains",["location","href"],"bigbangmarkerdev"]]],"triggerId":8554},{"position":29401,"name":"Flyout cart - Recommendation","elementId":".product-message-modal .modal-services-wrapper","method":"append","selectorType":"css","rules":["and",["not",["contains",["location","href"],"bigbangmarkerdev"]],["not",["contains",["location","href"],"bigbang.marker"]]],"triggerId":8571}],"customActions":{"segments":[],"states":["reco-no-product-to-show"],"rules":[]},"conversions":[],"googleAnalytics":{"trackDisplays":true,"trackTrueDisplays":true,"trackClicks":true,"eventCategory":"Frosmo","eventActionDisplay":"display","eventActionTrueDisplay":"true display","eventActionClick":"click","trackingId":"UA-36493418-1"},"templates":{},"templatePreRenderers":{},"quickMessages":[],"triggers":[{"id":8554,"rules":["and",["not",["contains",["location","href"],"-katalog"]]],"on_event":{"type":"domWait","selector":".page-homepage"},"alias":"FCP_TRIGGER_ALIAS_pagetype_home"},{"id":8555,"rules":["and",["not",["contains",["location","href"],"-katalog"]]],"on_event":{"type":"domWait","selector":".page-catalog-detail"},"alias":"FCP_TRIGGER_ALIAS_pagetype_product"},{"id":8556,"rules":["and",["not",["contains",["location","href"],"-katalog"]]],"on_event":{"type":"domWait","selector":".page-catalog-lvl2"},"alias":"FCP_TRIGGER_ALIAS_pagetype_category"},{"id":8557,"rules":[],"on_event":{"type":"easy.ready"},"alias":null},{"id":8558,"rules":[],"on_event":{"type":"jsvarWait","js_var":"window.dataLayer"},"alias":null},{"id":8559,"rules":["and",["not",["eq?",["js","(function() {\n  return JSON.stringify(frosmo.site.getAffinity());\n})()"],"{}"]]],"on_event":{"type":"easyEvent","eventName":"frosmo_userInterest_ready"},"alias":null},{"id":8560,"rules":[],"on_event":{"type":"easyEvent","eventName":"frosmo_product_view"},"alias":null},{"id":8561,"rules":["and",["eq?",["var","event"],"route_change"]],"on_event":{"type":"dataLayer"},"alias":"FCP_TRIGGER_ALIAS_custom_route_change"},{"id":8562,"rules":["and",["eq?",["js","String(easy.uid.isInComparisonGroup(easy.uid.get()))"],"true"]],"on_event":{"type":"easy.ready"},"alias":"FCP_TRIGGER_ALIAS_visitor_in_cg"},{"id":8563,"rules":["and",["eq?",["js","String(easy.uid.isInComparisonGroup(easy.uid.get()))"],"false"]],"on_event":{"type":"easy.ready"},"alias":"FCP_TRIGGER_ALIAS_visitor_not_in_cg"},{"id":8564,"rules":[],"on_event":{"type":"easyEvent","eventName":"message.showMessage"},"alias":"FCP_TRIGGER_ALIAS_modification_display"},{"id":8565,"rules":["and",["and",["eq?",["var","event"],"frosmo_product_view"],["contains",["pluck",["var","products"],["array","0","category"]],"Power Tools"]]],"on_event":{"type":"dataLayer"},"alias":null},{"id":8566,"rules":["and",["eq?",["var","event"],"frosmo_product_addtocart"]],"on_event":{"type":"dataLayer"},"alias":null},{"id":8567,"rules":["and",["and",["eq?",["var","event"],"frosmo_cart_subtotal"],["<",["var","amount"],"100"]]],"on_event":{"type":"dataLayer"},"alias":"FCP_TRIGGER_ALIAS_cart_subtotal_below_free_delivery"},{"id":8568,"rules":[],"on_event":{"type":"domWait","selector":".page-cart","timeout":60},"alias":"FCP_TRIGGER_ALIAS_pagetype_cart"},{"id":8569,"rules":[],"on_event":{"type":"domWait","selector":".cart .cart__totals-header > tr > td"},"alias":"FCP_TRIGGER_ALIAS_cart_total_available"},{"id":8570,"rules":["and",["eq?",["var","event"],"frosmo_exit_intent"]],"on_event":{"type":"dataLayer"},"alias":"FCP_TRIGGER_ALIAS_exit_intent"},{"id":8571,"rules":["and",["eq?",["domelem","[data-shoppingcart_product_service=\"1\"]","childElementCount"],"0"]],"on_event":{"type":"domWait","selector":".product-message-modal.active"},"alias":"TRIGGER_NO_UPSELL_IN_FLYOUT_CART"},{"id":8574,"rules":["and",[">",["domelem","[data-shoppingcart_product_service=\"1\"]","childElementCount"],"0"]],"on_event":{"type":"domWait","selector":".product-message-modal.active"},"alias":"TRIGGER_UPSELLS_IN_FLYOUT_CART"},{"id":8590,"rules":[],"on_event":{"type":"domWait","selector":".product-message-modal.active"},"alias":"TRIGGER_FLYOUT_CART_ACTIVE"},{"id":8603,"rules":[],"on_event":{"type":"easyEvent","eventName":"FLYOUT_CART_ACTIVE"},"alias":"TRIGGER_FLYOUT_CART_ACTIVE"},{"id":8604,"rules":[],"on_event":{"type":"easyEvent","eventName":"NO_UPSELL_IN_FLYOUT_CART"},"alias":"TRIGGER_NO_UPSELL_IN_FLYOUT_CART"},{"id":8605,"rules":["and",["eq?",["var","event"],"frosmo_product_addtocart"]],"on_event":{"type":"dataLayer"},"alias":"TRIGGER_PRODUCT_ADD_TO_CART"},{"id":8606,"rules":[],"on_event":{"type":"easyEvent","eventName":"UPSELLS_IN_FLYOUT_CART"},"alias":"TRIGGER_UPSELLS_IN_FLYOUT_CART"},{"id":10119,"rules":["and",["contains",["pluck",["var","ecommerce"],["array","items","0","item_category2"]],"Bela tehnika"]],"on_event":{"type":"dataLayer"},"alias":null}],"hiddenMessageClickTracking":true,"sharedCode":[{"id":1929,"content":"var EVENT_PRODUCT_VIEW = 'frosmo_product_view';\nvar EVENT_PRODUCT_TRANSACTION = 'frosmo_product_transaction';\nvar EVENT_PRODUCT_CART_ADD = 'frosmo_product_addtocart';\nvar EVENT_PRODUCT_CART_REMOVE = 'frosmo_product_removefromcart';\nvar EVENT_PRODUCT_IMPRESSION = 'frosmo_product_impression';\nvar EVENT_CHECKOUT = 'frosmo_checkout';\nvar EVENT_EXIT_INTENT = 'frosmo_exit_intent';\nvar EVENT_CART_SUBTOTAL = 'frosmo_cart_subtotal';\nvar EVENT_PAGETYPE_HOME = 'FCP_TRIGGER_ALIAS_pagetype_home';\nvar EVENT_PAGETYPE_PRODUCT = 'FCP_TRIGGER_ALIAS_pagetype_product';\nvar EVENT_PAGETYPE_CATEGORY = 'FCP_TRIGGER_ALIAS_pagetype_category';\nvar EVENT_PAGETYPE_SECTION = 'FCP_TRIGGER_ALIAS_pagetype_section';\nvar EVENT_PAGETYPE_CART = 'FCP_TRIGGER_ALIAS_pagetype_cart';\nvar EVENT_PAGETYPE_SEARCH = 'FCP_TRIGGER_ALIAS_pagetype_search';\n\nvar clearEvents = ['dataLayer', EVENT_PRODUCT_VIEW, EVENT_PRODUCT_TRANSACTION, EVENT_PRODUCT_CART_ADD, EVENT_PRODUCT_CART_REMOVE, EVENT_PRODUCT_IMPRESSION, EVENT_CHECKOUT, EVENT_EXIT_INTENT, EVENT_CART_SUBTOTAL, EVENT_PAGETYPE_HOME, EVENT_PAGETYPE_PRODUCT, EVENT_PAGETYPE_CATEGORY, EVENT_PAGETYPE_CART, EVENT_PAGETYPE_SEARCH];\n\n\/\/ Enable Single Page Application (SPA) support\n\/\/ See http:\/\/easy.frosmo\/current\/global.html#SinglePageConfig for more details\neasy.config.singlePageSupport = {\n    hashchange: true,\n    popstate: true,\n    pushstate: true,\n    cancelPendingRequests: false,\n    clearEvents: []\n};\n\nvar _originalStrategiesFetch = easy.strategies.fetch;\neasy.strategies.fetch = function() {\n    var args = easy.utils.arrayFrom(arguments);\n    easy.console.info('deferring easy.strategies.fetch', args);\n    return new easy.Promise( function(resolve, reject) {\n        easy.utils.setTimeout( function() {\n            easy.console.info('applying easy.strategies.fetch', args);\n            var fetchPromise = _originalStrategiesFetch.apply(easy.strategies, args);\n            fetchPromise\n            .then( function(results) {\n                resolve(results);\n            })\n            .catch( function(error) {\n                reject(error);\n            })\n        }, 500);\n    });\n}\n\nvar _originalOnPageChangeEvent = easy.spa.onPageChangeEvent;\neasy.spa.onPageChangeEvent = function() {\n    var args = easy.utils.arrayFrom(arguments);\n\n    easy.utils.each( clearEvents, function(eventName) {\n        easy.events.clearEvent(eventName);\n    });\n\n    easy.message.clear();\n    easy.triggers.clear();\n    easy.segments.clear();\n\n\n    var backupTimeout = easy.utils.setTimeout( function() {\n        _originalOnPageChangeEvent.apply(easy.spa, args);\n        easy.events.off(easy.EVENT_DATALAYER, checkDataLayerEvent);\n    }, 5000);\n\n    function checkDataLayerEvent(data) {\n        if (data.event === 'virtualPageview') {\n            clearTimeout(backupTimeout);\n            _originalOnPageChangeEvent.apply(easy.spa, args);\n            easy.events.off(easy.EVENT_DATALAYER, checkDataLayerEvent);\n        }\n    }\n\n    easy.events.on(easy.EVENT_DATALAYER, checkDataLayerEvent);\n}","triggerId":null},{"id":1930,"content":"\"fffe1f579a80608f6f00a4e8b83a77c586bde2da\";\n(function () {\n  'use strict';\n\n  function initializeTemplateDefaults(templateDefaults) {\n    var initializedTemplateDefaults = easy.utils.clone(templateDefaults);\n    initializedTemplateDefaults.useShuffle = initializedTemplateDefaults.hasOwnProperty('useShuffle') ? Boolean(initializedTemplateDefaults.useShuffle) : true;\n    initializedTemplateDefaults.useCount = initializedTemplateDefaults.useCount || 8;\n    initializedTemplateDefaults.fixedIds = initializedTemplateDefaults.fixedIds || [];\n    initializedTemplateDefaults.excludeIds = initializedTemplateDefaults.excludeIds || [];\n    initializedTemplateDefaults.excludeShownProducts = initializedTemplateDefaults.hasOwnProperty('excludeShownProducts') ? Boolean(initializedTemplateDefaults.excludeShownProducts) : true;\n    return initializedTemplateDefaults;\n  }\n  \/**\n   * Returns ID property of RecommendationProduct\n   *\n   * @param product RecommendationProduct\n   *\/\n\n  function getProductId(product) {\n    return product.id;\n  }\n  \/**\n   * Get unique categories from impressions\n   *\n   * @returns {Promise}     Promise resolves with Array of unique categories\n   *\/\n\n  function getUniqueCategoriesFromImpressions() {\n    return promiseFromEvent('frosmo_product_impression', 'once').then(function (eventData) {\n      var products = eventData[0];\n      var uniqueCategoryCounts = getArrayUniqueWithCounts(products, 'category');\n      return uniqueCategoryCounts.map(function (category) {\n        return category.id;\n      });\n    });\n  }\n  \/**\n   * Shuffle an array with the Fisher-Yates shuffle algorithm\n   * http:\/\/sedition.com\/perl\/javascript-fy.html\n   * Implementation from: https:\/\/github.com\/Daplie\/knuth-shuffle\/blob\/master\/index.js\n   *\n   * @param   {array} array   Array to shuffle\n   * @returns {array}         Shuffled array\n   *\/\n\n  function shuffle(array) {\n    var currentIndex = array.length;\n    var temporaryValue;\n    var randomIndex; \/\/ While there remain elements to shuffle...\n\n    while (currentIndex !== 0) {\n      \/\/ Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1; \/\/ And swap it with the current element.\n\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n\n    return array;\n  }\n  \/**\n   * Create a promise from an easy.event\n   * TODO: add timeout for reject\n   * @param {string}  event   Event name\n   * @param {type}    type    Type of event (on \/ once), defaults to once\n   *\/\n\n  function promiseFromEvent(event, type) {\n    if (type === void 0) {\n      type = 'once';\n    }\n\n    return new easy.Promise(function (resolve) {\n      easy.events[type](event, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        resolve(args);\n      });\n    });\n  }\n  \/**\n   *\n   * @param {array}   arr     array of objects\n   * @param {string}  attr    attribute of object to get unique by\n   * @returns {array}         array of unique objects in input array\n   *\/\n\n  function getArrayUniqueByAttribute(arr, attr) {\n    return arr.filter(function (item, index) {\n      return !arr.some(function (otherItem, otherIndex) {\n        \/\/ Check similarity by attribute. Filter only items with larger index\n        var isTheSame = otherItem[attr] === item[attr] && otherIndex !== index && index > otherIndex;\n        return isTheSame;\n      });\n    });\n  }\n  \/**\n   * Get attribute-weight pairs from a source array based on array object attribute\n   *\n   * @param {array} sourceArray   array of objects\n   * @param {string} attribute    attribute of object to get unique by\n   * @returns {array}             array of objects, attributs: id, weight\n   *\/\n\n  function getArrayUniqueWithCounts(sourceArray, attribute) {\n    \/\/ Reduce array to attribute-weight pairs\n    return easy.utils.reduce(sourceArray, function (reduction, item) {\n      if (!item[attribute]) {\n        return reduction;\n      } \/\/ Find existing item in reduction\n\n\n      var existingItem = easy.utils.find(reduction, function (reductionItem) {\n        return reductionItem.id === item[attribute];\n      });\n\n      if (existingItem) {\n        existingItem.weight = existingItem.weight + 1;\n        return reduction;\n      }\n\n      reduction.push({\n        id: item[attribute],\n        weight: 1\n      });\n      return reduction;\n    }, []).sort(function (a, b) {\n      return b.weight - a.weight;\n    });\n  }\n\n  var EVENT_PRODUCT_VIEW = 'frosmo_product_view';\n  var EVENT_PRODUCT_CART_ADD = 'frosmo_product_addtocart';\n  var EVENT_PRODUCT_IMPRESSION = 'frosmo_product_impression';\n  var EVENT_USERINTEREST_READY = 'frosmo_userInterest_ready';\n  var EVENT_PAGETYPE_PRODUCT = 'FCP_TRIGGER_ALIAS_pagetype_product';\n  var EVENT_PAGETYPE_CATEGORY = 'FCP_TRIGGER_ALIAS_pagetype_category';\n  var EVENT_PAGETYPE_CART = 'FCP_TRIGGER_ALIAS_pagetype_cart';\n  var EVENT_PAGETYPE_SEARCH = 'FCP_TRIGGER_ALIAS_pagetype_search';\n\n  var configApi = easy.config.api;\n  frosmo.site = frosmo.site || {};\n  var site = frosmo.site;\n  var recoApiURL = easy.api.getApiUrl('reco') + '\/v2?method=multifetch&origin=' + configApi.origin;\n  var productApiURL = easy.api.getApiUrl('product') + '?method=fetch&origin=' + configApi.origin;\n\n  \/**\n   * Get product data for an array of products\n   * @param {array} arrayOfProducts Array of product IDs\n   *\/\n\n  function getProductApiData(arrayOfProducts) {\n    if (arrayOfProducts.length === 0) {\n      return easy.Promise.resolve([]);\n    } \/\/ Make sure product IDs are in string format for API\n\n\n    var productIds = arrayOfProducts.map(function (productId) {\n      return String(productId);\n    });\n    var stringIds = JSON.stringify(productIds); \/\/ Get product data for last viewed products\n\n    return easy.fetch.get(productApiURL + '&ids=' + stringIds).then(function (results) {\n      return results.data;\n    });\n  }\n\n  \/*! *****************************************************************************\n  Copyright (c) Microsoft Corporation.\n\n  Permission to use, copy, modify, and\/or distribute this software for any\n  purpose with or without fee is hereby granted.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n  PERFORMANCE OF THIS SOFTWARE.\n  ***************************************************************************** *\/\n  function __spreadArray(to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n        if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n        ar[i] = from[i];\n      }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n  }\n\n  function _getRecommendationRequest(request, trackFn) {\n    var recoApiQueryObject = request.configurations.map(function (configurationName) {\n      return {\n        name: configurationName,\n        params: request.parameters.reduce(function (reduction, parameter) {\n          reduction[parameter.key] = parameter.values;\n          return reduction;\n        }, {})\n      };\n    });\n    var apiParams = '&recos=' + encodeURIComponent(JSON.stringify(recoApiQueryObject));\n    trackFn('fetch', {\n      params: apiParams\n    });\n    return easy.fetch.get(\"\" + recoApiURL + apiParams);\n  }\n  \/**\n   * Get multiple recommendations and return resulting products\n   *\/\n\n\n  function getRecommendations(recommendations, templateDefaults, trackFn) {\n    templateDefaults = initializeTemplateDefaults(templateDefaults);\n    var recoApiPromises = easy.utils.map(recommendations, function (recommendationRequest) {\n      return _getRecommendationRequest(recommendationRequest, trackFn);\n    });\n    return easy.Promise.all(recoApiPromises).then(function (recoApiResponses) {\n      var flattenedRecoApiPromises = recoApiResponses.reduce(function (reduction, result) {\n        reduction.push.apply(reduction, result.data);\n        return reduction;\n      }, []);\n      return _flattenRecoApiResponse(flattenedRecoApiPromises, templateDefaults, trackFn);\n    });\n  }\n\n  function _isValidProduct(product, templateDefaults) {\n    var excludeIds = templateDefaults && templateDefaults.excludeIds || [];\n    frosmo.site.recommendations.recommendedProducts = frosmo.site.recommendations.recommendedProducts || [];\n\n    if (templateDefaults && templateDefaults.excludeShownProducts) {\n      excludeIds = __spreadArray(__spreadArray([], excludeIds), frosmo.site.recommendations.recommendedProducts);\n    }\n\n    return product.type && product.type !== 'category' && product.attributes && product.attributes.thumbnail && !easy.utils.some(excludeIds, function (excludeId) {\n      return excludeId === product.id;\n    });\n  }\n\n  function prepareRecommendationProducts(products, templateDefaults) {\n    \/\/ Remove invalid products\n    var recommendationProducts = easy.utils.filter(products, function (product) {\n      return _isValidProduct(product, templateDefaults);\n    }); \/\/ Shuffle products\n\n    if (templateDefaults && templateDefaults.useShuffle) {\n      recommendationProducts = shuffle(recommendationProducts);\n    } \/\/ Remove duplicates\n\n\n    recommendationProducts = getArrayUniqueByAttribute(recommendationProducts, 'id'); \/\/ Take only useCount products\n\n    if (templateDefaults && templateDefaults.useCount) {\n      recommendationProducts = recommendationProducts.slice(0, templateDefaults.useCount);\n    } \/\/ Store shown productIds for duplicate removal\n\n\n    var recommendationProductIds = easy.utils.map(recommendationProducts, getProductId);\n    frosmo.site.recommendations.recommendedProducts = frosmo.site.recommendations.recommendedProducts || [];\n    frosmo.site.recommendations.recommendedProducts = __spreadArray(__spreadArray([], recommendationProductIds), frosmo.site.recommendations.recommendedProducts);\n    return recommendationProducts;\n  }\n  \/**\n   * Flatten array of responses from recoApi\n   * @param {array}       response            Array of responses from recoApi\n   * @param {Object}      templateDefaults    Parameters passed from template\n   * @param {Function}    trackFn             Tracking function to call\n   * @returns {array}                         Array of product ids (string)\n   *\/\n\n  function _flattenRecoApiResponse(response, templateDefaults, trackFn) {\n    \/\/ Flatten response to array\n    var recommendationProducts = response.reduce(function (reduction, result) {\n      reduction.push.apply(reduction, result);\n      return reduction;\n    }, []);\n    var products = prepareRecommendationProducts(recommendationProducts, templateDefaults);\n    var productIds = easy.utils.map(products, getProductId);\n    trackFn('ready', productIds);\n    return products;\n  }\n\n  site.recommendations = site.recommendations || {};\n  site.recommendations.getProductApiData = getProductApiData;\n  site.recommendations.prepareRecommendationProducts = prepareRecommendationProducts;\n  var recommendations = site.recommendations;\n\n  \/**\n   * Send additional recommendation strategy data\n   *\n   * @param   {string}    module      Module name\n   * @param   {string}    action      Action taken\n   * @param   {object}    data        Additional data\n   *\/\n  function sendTrackingData(module, action, data) {\n    if (!easy.tracking) {\n      easy.console.info('Advanced tracking not enabled, strategy data not sent');\n      return;\n    }\n\n    easy.tracking.data('reco.retail', {\n      module: module,\n      action: action,\n      uid: easy.uid.get(),\n      url: window.location.href,\n      ua: window.navigator.userAgent,\n      ts: Date.now(),\n      data: data\n    });\n  }\n\n  function isValidAffinity(affinity) {\n    if (!affinity) return false;\n    if (!Object.prototype.hasOwnProperty.call(affinity, 'attribute')) return false;\n    if (!Object.prototype.hasOwnProperty.call(affinity, 'value')) return false;\n    return true;\n  }\n  \/**\n   * Bundle view from user affinity (most significant user favourite among: category, game, vendor)\n   *\n   * @param   templateDefaults {Object}   Options passed from template defaults\n   * @returns                  {Promise}  Promise to return array of product IDs\n   *\/\n\n\n  function userAffinity(templateDefaults) {\n    var trackFn = sendTrackingData.bind(null, 'userAffinity');\n    trackFn('init', {\n      param: templateDefaults\n    });\n    return promiseFromEvent(EVENT_USERINTEREST_READY).then(function () {\n      var affinity = frosmo.site.getAffinity();\n\n      if (!isValidAffinity(affinity)) {\n        var description = 'User has no affinity';\n        trackFn('ready', description);\n        easy.console.log('userAffinity: ' + description);\n        throw new Error('No affinity');\n      }\n\n      var recoName = '';\n      var paramKey = '';\n\n      switch (affinity.attribute) {\n        case 'id':\n          recoName = 'bundle_viewed-60d';\n          paramKey = 'id';\n          break;\n\n        case 'category':\n          recoName = 'bundle_viewed_with_category-30d';\n          paramKey = 'category';\n          break;\n\n        case 'brand':\n          recoName = 'most_viewed_by_brand-60d';\n          paramKey = 'brand';\n          break;\n\n        default:\n          recoName = 'bundle_viewed-60d';\n          break;\n      }\n\n      return getRecommendations([{\n        configurations: [recoName],\n        parameters: [{\n          key: paramKey,\n          values: [affinity.value]\n        }]\n      }], templateDefaults, trackFn);\n    })[\"catch\"](function (err) {\n      \/\/ Catch break-out errors and resolve with empty array\n      if (err.message === 'No interests') {\n        return easy.Promise.resolve([]);\n      } \/\/ Rethrow for real error\n\n\n      throw new Error(err);\n    });\n  }\n\n  var MODULE = '[Recommendations] Retail strategies';\n\n  if (frosmo.site.strategiesLoaded) {\n    easy.console.log(MODULE, 'Init aborted, strategies already loaded'); \/\/ SPA change - clear recommendedProducts\n\n    window.frosmo.site.recommendations.recommendedProducts = [];\n  } else {\n    frosmo.site.strategiesLoaded = true;\n    easy.console.log(MODULE, 'Init');\n    \/**\n     * Set category page context\n     *\/\n\n    easy.events.on(EVENT_PAGETYPE_CATEGORY, function () {\n      getUniqueCategoriesFromImpressions().then(function (categories) {\n        if (categories.length === 0) {\n          return;\n        }\n\n        easy.strategies.setPageCategoryContext(categories.slice(0, 20));\n      });\n    });\n    \/**\n     * Set search page context\n     *\/\n\n    easy.events.on(EVENT_PAGETYPE_SEARCH, function () {\n      easy.events.once(EVENT_PRODUCT_IMPRESSION, function (products) {\n        \/\/ Take 20 unique IDs. EEC guidelines states impressions should list first visible products, not the full list\n        \/\/ Recommendation API only processes top 3 at this time\n        var productsById = getArrayUniqueWithCounts(products, 'id').slice(0, 20);\n        var ids = easy.utils.map(productsById, function (product) {\n          return product.id;\n        }); \/\/ Take 20 unique categories. EEC guidelines states impressions should list first visible products, not the full list\n        \/\/ Recommendation API only processes top 3 at this time\n\n        var productsByCategory = getArrayUniqueWithCounts(products, 'category').slice(0, 20);\n        var categories = easy.utils.map(productsByCategory, function (product) {\n          return product.id;\n        });\n        easy.strategies.setPageSearchContext(ids, categories);\n      });\n    });\n    \/**\n     * Set cart page context\n     *\/\n\n    easy.events.on(EVENT_PAGETYPE_CART, function () {\n      easy.events.once(EVENT_USERINTEREST_READY, function (userInterest) {\n        var interests = userInterest.getByType('product_addtocart', 'lastTimestamp');\n\n        if (interests.length === 0) {\n          return;\n        }\n\n        easy.strategies.setPageCartContext([interests[0].id]);\n      });\n    });\n    easy.events.on(EVENT_PRODUCT_CART_ADD, function (product) {\n      easy.strategies.setPageCartContext([product.id]);\n      window.dataLayer.push({\n        frosmo: {\n          addToCart: {\n            items: [{\n              id: product.id\n            }]\n          }\n        }\n      });\n    });\n    \/**\n     * Set product page context\n     *\/\n\n    easy.events.on(EVENT_PAGETYPE_PRODUCT, function () {\n      easy.events.once(EVENT_PRODUCT_VIEW, function (product) {\n        easy.strategies.setPageProductContext({\n          id: product.id,\n          category: product.category\n        });\n      });\n    });\n    \/**\n     * Legacy: remove when possible to implement in UI\n     *\/\n\n    recommendations.retail = {\n      userAffinity: userAffinity\n    };\n  }\n\n}());","triggerId":8557},{"id":1932,"content":"\"fffe1f579a80608f6f00a4e8b83a77c586bde2da\";\n(function () {\n  'use strict';\n\n  var transactionDefinition = {\n    required: {\n      id: 'string',\n      revenue: 'number',\n      products: 'array'\n    }\n  };\n  var transactionProductDefinition = {\n    required: {\n      id: 'string'\n    },\n    optional: {\n      name: 'string',\n      price: 'number',\n      quantity: 'number'\n    }\n  };\n  var productDefinition = {\n    required: {\n      id: 'string'\n    },\n    optional: {\n      name: 'string',\n      category: 'string',\n      brand: 'string',\n      url: 'string',\n      image: 'string',\n      price: 'string',\n      data: 'object',\n      quantity: 'number'\n    }\n  };\n  var checkoutDefinition = {\n    required: {\n      products: 'array'\n    },\n    optional: {\n      info: 'object'\n    }\n  };\n  function isValidProduct(product) {\n    return isValid(product, productDefinition.required);\n  }\n  function isValidCheckout(checkout) {\n    if (!isValid(checkout, checkoutDefinition.required)) {\n      return false;\n    }\n\n    return checkout.products.every(function (product) {\n      return isValidProduct(product);\n    });\n  }\n  function isValidTransaction(transaction) {\n    if (!isValid(transaction, transactionDefinition.required)) {\n      return false;\n    }\n\n    if (!transaction.products.length) {\n      return false;\n    }\n\n    return transaction.products.every(function (product) {\n      return isValid(product, transactionProductDefinition.required);\n    });\n  }\n\n  function isType(val, type) {\n    return easy.utils.getType(val) === type;\n  }\n\n  function isValid(obj, requiredAttributes) {\n    if (!easy.utils.isObject(obj) || easy.utils.isEmpty(obj)) {\n      return false;\n    }\n\n    return easy.utils.every(requiredAttributes, function (val, key) {\n      return obj[key] && isType(obj[key], val);\n    });\n  }\n\n  function removeAdditionalAttributes(obj, definition) {\n    var attributes = [];\n\n    if (definition.required) {\n      attributes = attributes.concat(Object.keys(definition.required));\n    }\n\n    if (definition.optional) {\n      attributes = attributes.concat(Object.keys(definition.optional));\n    }\n\n    return attributes.reduce(function (finalObj, attr) {\n      if (obj.hasOwnProperty(attr) && obj[attr] !== null && obj[attr] !== undefined) {\n        finalObj[attr] = obj[attr];\n      }\n\n      return finalObj;\n    }, {});\n  }\n\n  var EVENT_PRODUCT_VIEW = 'frosmo_product_view';\n  var EVENT_PRODUCT_TRANSACTION = 'frosmo_product_transaction';\n  var EVENT_PRODUCT_CART_ADD = 'frosmo_product_addtocart';\n  var EVENT_PRODUCT_CART_REMOVE = 'frosmo_product_removefromcart';\n  var EVENT_PRODUCT_IMPRESSION = 'frosmo_product_impression';\n  var EVENT_CHECKOUT = 'frosmo_checkout';\n  var EVENT_USERINTEREST_READY = 'frosmo_userInterest_ready';\n  var EVENT_USERINTEREST_WEIGHT = 'frosmo_userInterest_weight';\n  var EVENT_USERINTEREST_LASTTIMESTAMP = 'frosmo_userInterest_lastTimestamp';\n\n  function productView(product) {\n    if (!isValidProduct(product)) {\n      easy.log.error('Product is not valid', 'tracking.productview', {\n        debug: JSON.stringify(product)\n      });\n      return;\n    }\n\n    var frosmoProduct = _mapProductDetailToFrosmoProductPayload(product);\n\n    window.dataLayer.push({\n      frosmo: {\n        view: {\n          products: [frosmoProduct]\n        }\n      }\n    });\n    easy.events.trigger(EVENT_PRODUCT_VIEW, product);\n  }\n  \/**\n   * Map event frosmo_product_view event objects\n   * to Frosmo dataLayer products (type payload)\n   *\n   * http:\/\/easy.frosmo\/current\/global.html#ProductDataPayload\n   *\n   * @param {product} Product data from event frosmo_product_view\n   *\/\n\n  function _mapProductDetailToFrosmoProductPayload(product) {\n    return easy.utils.extend({\n      id: product.id,\n      type: product.category\n    }, product);\n  }\n\n  function productImpression(products) {\n    easy.events.trigger(EVENT_PRODUCT_IMPRESSION, products);\n  }\n\n  function transaction(transaction) {\n    if (!isValidTransaction(transaction)) {\n      easy.log.error('Transaction is not valid', 'tracking.module.transaction', {\n        debug: JSON.stringify(transaction)\n      });\n      return;\n    }\n\n    var filteredTransaction = removeAdditionalAttributes(transaction, transactionDefinition);\n    var products = filteredTransaction.products;\n    var frosmoTransaction = {\n      transactionId: filteredTransaction.id,\n      transactionTotal: filteredTransaction.revenue,\n      transactionProducts: products\n    };\n    window.dataLayer.push(frosmoTransaction);\n    easy.events.trigger(EVENT_PRODUCT_TRANSACTION, filteredTransaction);\n  }\n\n  var infoDefinition = {\n    optional: {\n      step: 'number',\n      option: 'string'\n    }\n  };\n  function checkout(eventData) {\n    if (!isValidCheckout(eventData) || !eventData.products.length) {\n      easy.log.error('Checkout data is not valid', 'tracking.module.checkout', {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n    var data = {\n      info: eventData.info ? removeAdditionalAttributes(eventData.info, infoDefinition) : null,\n      products: eventData.products.map(function (product) {\n        return removeAdditionalAttributes(product, productDefinition);\n      })\n    };\n    easy.tracking.data(EVENT_CHECKOUT, data);\n    easy.events.trigger(EVENT_CHECKOUT, data);\n  }\n\n  function addToCart(product) {\n    if (!isValidProduct(product)) {\n      easy.log.error('Product is not valid', 'tracking.module.cart.add', {\n        debug: JSON.stringify(product)\n      });\n      return;\n    }\n\n    easy.tracking.data(EVENT_PRODUCT_CART_ADD, product);\n    easy.events.trigger(EVENT_PRODUCT_CART_ADD, product);\n  }\n  function removeFromCart(product) {\n    if (!isValidProduct(product)) {\n      easy.log.error('Product is not valid', 'tracking.module.cart.remove', {\n        debug: JSON.stringify(product)\n      });\n      return;\n    }\n\n    easy.tracking.data(EVENT_PRODUCT_CART_REMOVE, product);\n    easy.events.trigger(EVENT_PRODUCT_CART_REMOVE, product);\n  }\n\n  function handleDataLayer(eventData) {\n    switch (eventData.event) {\n      case EVENT_PRODUCT_VIEW:\n        eventData.products.forEach(function (product) {\n          productView(product);\n        });\n        break;\n\n      case EVENT_PRODUCT_IMPRESSION:\n        productImpression(eventData.products);\n        break;\n\n      case EVENT_PRODUCT_TRANSACTION:\n        transaction(eventData);\n        break;\n\n      case EVENT_PRODUCT_CART_ADD:\n        eventData.products.forEach(function (product) {\n          return addToCart(product);\n        });\n        break;\n\n      case EVENT_PRODUCT_CART_REMOVE:\n        eventData.products.forEach(function (product) {\n          return removeFromCart(product);\n        });\n        break;\n\n      case EVENT_CHECKOUT:\n        checkout(eventData);\n        break;\n    }\n  }\n\n  var MODULE$1 = '[tracking_module]';\n  window.dataLayer = window.dataLayer || [];\n\n  if (!frosmo.site.trackingModuleLoaded) {\n    easy.events.on(easy.EVENT_DATALAYER, handleDataLayer);\n    frosmo.site.trackingModuleLoaded = true;\n    easy.console.log(MODULE$1, 'init tracking module');\n  } else {\n    easy.console.log(MODULE$1, 'init aborted, tracking module already initialised');\n  }\n\n  \/*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation.\r\n\r\n  Permission to use, copy, modify, and\/or distribute this software for any\r\n  purpose with or without fee is hereby granted.\r\n\r\n  THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n  PERFORMANCE OF THIS SOFTWARE.\r\n  ***************************************************************************** *\/\n  function __rest(s, e) {\n    var t = {};\n\n    for (var p in s) {\n      if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }\n\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n  }\n\n  var week = 604800; \/\/ One week\n\n  var UserInterest = function () {\n    function UserInterest() {\n      this.affinityLimit = 2;\n      this.config = {\n        product_view: {\n          resetAfter: week\n        },\n        product_purchase: {\n          resetAfter: week\n        },\n        category_view: {\n          resetAfter: week\n        },\n        category_purchase: {\n          resetAfter: week\n        }\n      };\n      this.maxEventsPerInterest = 100;\n      this.attributeWeights = {\n        product_view: 1,\n        category_view: 0.8,\n        brand_view: 0.9\n      };\n      this.context = easy.context.site[UserInterest.interestKey] = easy.context.site[UserInterest.interestKey] || {};\n\n      this._clearExpiredInterests();\n\n      this._bindToDataLayerEvents();\n    }\n\n    UserInterest.prototype._bindToDataLayerEvents = function () {\n      easy.events.on(EVENT_PRODUCT_VIEW, this._handleProductView, this);\n      easy.events.on(EVENT_PRODUCT_TRANSACTION, this._handleProductTransaction, this);\n      easy.events.on(EVENT_PRODUCT_CART_ADD, this._handleProductAddToCart, this);\n    };\n\n    UserInterest.prototype._handleProductView = function (product) {\n      this._saveInterest('product_view', product.id);\n\n      this._saveInterest('category_view', product.category);\n\n      this._saveInterest('brand_view', product.brand);\n    };\n\n    UserInterest.prototype._handleProductTransaction = function (transaction) {\n      transaction.products.forEach(function (product) {\n        this._saveInterest('product_purchase', product.id);\n\n        this._saveInterest('category_purchase', product.category);\n\n        this._saveInterest('brand_purchase', product.brand);\n      }, this);\n    };\n\n    UserInterest.prototype._handleProductAddToCart = function (product) {\n      this._saveInterest('product_addtocart', product.id);\n\n      this._saveInterest('category_addtocart', product.category);\n\n      this._saveInterest('brand_addtocart', product.brand);\n    };\n    \/**\n     * Get user interest by type\n     * @param {string} dataType any data type string (group of data)\n     * @param {string} sortBy   sort by key (defaults to weight, biggest number first)\n     * @returns {array}         ordered array of interest keys\n     *\/\n\n\n    UserInterest.prototype.getByType = function (dataType, sortBy) {\n      var sortByAttribute = sortBy || 'weight';\n\n      var interests = this._getInterestsWithWeights(dataType).sort(function (a, b) {\n        return b[sortByAttribute] - a[sortByAttribute];\n      });\n\n      return interests;\n    };\n    \/**\n     * Get affinity of user interest\n     * Affinity means detecting of user interested in a specific game\/category\/brand\n     * @returns {object}  attribute and value  (eg: {attribute: 'id', value: 8829}\n     * OR {attribute: 'category', value: 'slots'}\n     * OR {attribute: 'brand', value: 'acme_brand'}\n     **\/\n\n\n    UserInterest.prototype.getAffinity = function () {\n      var affinities = this.getAffinitiesWithInterests();\n\n      if (affinities.length === 0) {\n        return {};\n      }\n\n      if (affinities[0].weight < this.affinityLimit) {\n        return {};\n      }\n\n      var _a = affinities[0];\n          _a.interests;\n          var affinityNoInterests = __rest(_a, [\"interests\"]);\n\n      return affinityNoInterests;\n    };\n\n    UserInterest.prototype.getAffinitiesWithInterests = function () {\n      var _this = this;\n\n      var events = ['product_view', 'category_view', 'brand_view'];\n      var affinities = events.map(function (dataType) {\n        var interests = _this.getByType(dataType, 'weight');\n\n        var interest = interests.length ? interests[0] : undefined;\n\n        if (!interest) {\n          return null;\n        }\n\n        var attribute = '';\n\n        switch (dataType) {\n          case 'product_view':\n            attribute = 'id';\n            break;\n\n          case 'category_view':\n            attribute = 'category';\n            break;\n\n          case 'brand_view':\n            attribute = 'brand';\n            break;\n\n          default:\n            attribute = 'id';\n            break;\n        }\n\n        var multiplier = _this.attributeWeights[dataType];\n        var interestWeight = interest.weight * multiplier;\n        return {\n          attribute: attribute,\n          value: interest.id,\n          weight: interestWeight,\n          originalWeight: interest.weight,\n          interests: interests\n        };\n      }).filter(function (affinity) {\n        return affinity !== null;\n      }).sort(function (a, b) {\n        return b.weight - a.weight;\n      });\n      return affinities;\n    };\n    \/**\n     * Get array of interest ids with weight\n     * @param {string} dataType any data type string (group of data)\n     * @returns {array}         array of id-weight pairs\n     *\/\n\n\n    UserInterest.prototype._getInterestsWithWeights = function (dataType) {\n      var data = this.context[dataType] || [];\n      return data.reduce(function (reduction, item) {\n        if (!item.id) {\n          easy.log.error('User interest has no id', 'userInterest.getByType', {\n            debug: JSON.stringify(item)\n          });\n          return reduction;\n        }\n\n        var existingItem = easy.utils.find(reduction, function (reductionItem) {\n          return reductionItem.id === item.id;\n        });\n\n        if (existingItem) {\n          existingItem.weight = existingItem.weight + 1;\n          existingItem.firstTimestamp = Math.min(existingItem.firstTimestamp, item.timestamp);\n          existingItem.lastTimestamp = Math.max(existingItem.lastTimestamp, item.timestamp);\n          return reduction;\n        }\n\n        reduction.push({\n          id: item.id,\n          weight: 1,\n          firstTimestamp: item.timestamp,\n          lastTimestamp: item.timestamp\n        });\n        return reduction;\n      }, []);\n    };\n\n    UserInterest.prototype.getContext = function () {\n      return this.context;\n    };\n\n    UserInterest.prototype._clearExpiredInterests = function () {\n      var _this = this;\n\n      Object.keys(this.context).forEach(function (dataType) {\n        var threshold = _this.config[dataType] && _this.config[dataType].resetAfter || UserInterest.defaultResetAfter;\n        var thresholdTimestamp = easy.utils.getTimestamp() - threshold;\n        _this.context[dataType] = _this.context[dataType].filter(function (item) {\n          if (!item.timestamp || !item.id) {\n            easy.log.error(\"User interest has no id or timestamp: \" + JSON.stringify(item), 'userInterest._clearExpiredInterests', {\n              debug: JSON.stringify(item)\n            });\n            return false;\n          }\n\n          return item.timestamp > thresholdTimestamp;\n        }).slice(0, _this.maxEventsPerInterest - 1);\n      });\n\n      this._saveContext();\n    };\n\n    UserInterest.prototype._saveContext = function () {\n      easy.context.save();\n    };\n    \/**\n     * Save an interest\n     * @param {string} dataType     any data type string (group of data)\n     * @param {string | number} id  identifier of data item\n     * @returns\n     *\/\n\n\n    UserInterest.prototype._saveInterest = function (dataType, id) {\n      if (!id) {\n        return;\n      }\n\n      this.context[dataType] = this.context[dataType] || [];\n      this.context[dataType].unshift({\n        id: id,\n        timestamp: easy.utils.getTimestamp()\n      });\n\n      this._saveContext();\n    };\n\n    UserInterest.prototype.ready = function () {\n      easy.events.trigger(EVENT_USERINTEREST_READY, this);\n\n      this._sendDataLayerEvent(EVENT_USERINTEREST_WEIGHT, 'weight');\n\n      this._sendDataLayerEvent(EVENT_USERINTEREST_LASTTIMESTAMP, 'lastTimestamp');\n    };\n    \/**\n     * Send dataLayer event with data sorted\n     * @param {string} event    Event name to send\n     * @param {string} sortBy   Sort resultset by attribute\n     *\/\n\n\n    UserInterest.prototype._sendDataLayerEvent = function (event, sortBy) {\n      var _this = this;\n\n      var interestDataTypes = Object.keys(this.context);\n      var interestData = interestDataTypes.map(function (dataType) {\n        return {\n          type: dataType,\n          data: _this.getByType(dataType, sortBy)\n        };\n      });\n      window.dataLayer = window.dataLayer || [];\n      window.dataLayer.push({\n        event: event,\n        data: interestData\n      });\n    };\n\n    UserInterest.defaultResetAfter = 1209600; \/\/ two weeks\n\n    UserInterest.interestKey = 'userInterest';\n    return UserInterest;\n  }();\n\n  var MODULE = '[user_interest]';\n  frosmo.site = frosmo.site = site || {};\n\n  if (site.userInterest) {\n    easy.console.log(MODULE, 'init aborted, module already initialised');\n  } else {\n    site.userInterest = new UserInterest(); \/\/ Helper functions\n\n    site.recentProducts = site.userInterest.getByType.bind(site.userInterest, 'product_view', 'lastTimestamp');\n    site.topViewedProducts = site.userInterest.getByType.bind(site.userInterest, 'product_view', 'weight');\n    site.recentCategories = site.userInterest.getByType.bind(site.userInterest, 'category_view', 'lastTimestamp');\n    site.topViewedCategories = site.userInterest.getByType.bind(site.userInterest, 'category_view', 'weight');\n    site.lastBoughtProducts = site.userInterest.getByType.bind(site.userInterest, 'product_purchase', 'lastTimestamp');\n    site.lastBoughtCategories = site.userInterest.getByType.bind(site.userInterest, 'category_purchase', 'lastTimestamp');\n    site.recentBrands = site.userInterest.getByType.bind(site.userInterest, 'brand_view', 'lastTimestamp');\n    site.topViewedBrands = site.userInterest.getByType.bind(site.userInterest, 'brand_view', 'weight');\n    site.getAffinity = site.userInterest.getAffinity.bind(site.userInterest);\n    site.getAffinitiesWithInterests = site.userInterest.getAffinitiesWithInterests.bind(site.userInterest);\n    site.userInterest.ready();\n    easy.console.log(MODULE, 'init');\n  }\n\n  function sendProductView(product) {\n    sendCustomActions('View', product);\n  }\n  function sendTransaction(transaction) {\n    easy.utils.each(transaction.products, function (product) {\n      sendCustomActions('Buy', product);\n    });\n  }\n  function sendAddtoCart(product) {\n    sendCustomActions('Add-to-cart', product);\n  }\n  function sendRemovefromCart(product) {\n    sendCustomActions('Remove-from-cart', product);\n  }\n\n  function sendCustomActions(type, product) {\n    if (product.name) {\n      sendFrosmoCustomAction(type + \" Product\", product.name);\n    }\n\n    if (product.category) {\n      sendFrosmoCustomAction(type + \" Category\", product.category);\n    }\n\n    if (product.brand) {\n      sendFrosmoCustomAction(type + \" Brand\", product.brand);\n    }\n  }\n\n  function sendFrosmoCustomAction(name, value) {\n    window.dataLayer.push({\n      frosmoEvent: name,\n      frosmoValue: value\n    });\n  }\n\n  if (!site.trackingCustomActions) {\n    easy.events.on(EVENT_PRODUCT_VIEW, sendProductView);\n    easy.events.on(EVENT_PRODUCT_TRANSACTION, sendTransaction);\n    easy.events.on(EVENT_PRODUCT_CART_ADD, sendAddtoCart);\n    easy.events.on(EVENT_PRODUCT_CART_REMOVE, sendRemovefromCart);\n    site.trackingCustomActions = true;\n  }\n\n}());","triggerId":8557},{"id":1934,"content":"\"fffe1f579a80608f6f00a4e8b83a77c586bde2da\";\n(function () {\n  'use strict';\n\n  var EVENT_EXIT_INTENT = 'frosmo_exit_intent';\n  var PAGES_VISITED_NUMBER = 'visited_pages_no';\n\n  var prevPos = null;\n  var currPos = null;\n  var delta = 0;\n  var timerId = 0;\n\n  function checkScrollSpeed() {\n    currPos = window.scrollY;\n\n    if (prevPos !== null) {\n      delta = currPos - prevPos;\n    }\n\n    prevPos = currPos;\n    clearTimeout(timerId);\n    timerId = easy.utils.setTimeout(reset, 50);\n    return delta;\n  }\n\n  function reset() {\n    prevPos = null;\n    delta = 0;\n  }\n\n  function checkScrollConditions() {\n    if (checkScrollSpeed() < -20 && window.scrollY < 3) {\n      sendExitIntent();\n    }\n  }\n\n  function sendExitIntent() {\n    window.dataLayer.push({\n      event: EVENT_EXIT_INTENT\n    });\n    easy.domEvents.off(document, 'mouseleave', sendExitIntent);\n    easy.domEvents.off(window, 'scroll', checkScrollConditions);\n  }\n\n  frosmo.site.exitIntentInitialized = frosmo.site.exitIntentInitialized || false;\n\n  if (!frosmo.site.exitIntentInitialized) {\n    frosmo.site.exitIntentInitialized = true;\n    easy.domEvents.on(document, 'mouseleave', sendExitIntent);\n    easy.domEvents.on(window, 'scroll', checkScrollConditions);\n  }\n\n  var pagesViewed = frosmo.easy.cookies.get(PAGES_VISITED_NUMBER);\n\n  if (!pagesViewed) {\n    frosmo.easy.cookies.set(PAGES_VISITED_NUMBER, 1);\n  } else {\n    frosmo.easy.cookies.set(PAGES_VISITED_NUMBER, parseInt(pagesViewed) + 1);\n  }\n\n}());","triggerId":8557},{"id":1935,"content":"\"19ce8a39632aec743cba8d9f859fbaa8223c424b\";\n(function () {\n  'use strict';\n\n  var productDefinition = {\n    required: {\n      id: 'string'\n    },\n    optional: {\n      price: 'string',\n      category: 'string',\n      quantity: 'number',\n      retailer: 'string'\n    }\n  };\n  function isValidProduct(product) {\n    return isValid(product, productDefinition.required);\n  }\n\n  function isType(val, type) {\n    return easy.utils.getType(val) === type;\n  }\n\n  function isValid(obj, requiredAttributes) {\n    if (!easy.utils.isObject(obj) || easy.utils.isEmpty(obj)) {\n      return false;\n    }\n\n    return easy.utils.every(requiredAttributes, function (val, key) {\n      return obj[key] && isType(obj[key], val);\n    });\n  }\n\n  function removeAdditionalAttributes(obj, definition) {\n    var attributes = [];\n\n    if (definition.required) {\n      attributes = attributes.concat(Object.keys(definition.required));\n    }\n\n    if (definition.optional) {\n      attributes = attributes.concat(Object.keys(definition.optional));\n    }\n\n    return attributes.reduce(function (finalObj, attr) {\n      if (obj.hasOwnProperty(attr) && obj[attr] !== null && obj[attr] !== undefined) {\n        finalObj[attr] = obj[attr];\n      }\n\n      return finalObj;\n    }, {});\n  }\n\n  function getFrosmoProductData(dataLayerProduct) {\n    var product = easy.utils.clone(dataLayerProduct);\n    product.id = product.item_id;\n    product.name = product.item_name;\n    product.category = product.item_list_name || product.item_category;\n    product.brand = product.item_brand;\n\n    if (easy.utils.isNumber(product.id)) {\n      product.id = String(product.id);\n    }\n\n    product.id = String(product.id).split('-')[0];\n\n    if (!product.image) {\n      product.image = _getOgContent('image');\n    }\n\n    if (!product.url) {\n      product.url = _getOgContent('url');\n    }\n\n    if (easy.utils.isNumber(product.price)) {\n      product.price = String(product.price);\n    }\n\n    var frosmoProduct = removeAdditionalAttributes(product, productDefinition);\n\n    if (easy.utils.isEmpty(frosmoProduct)) {\n      return;\n    } \/\/ In Frosmo 'id' is required, in GA id or name\n\n\n    if (!frosmoProduct.hasOwnProperty('id') && frosmoProduct.hasOwnProperty('name')) {\n      frosmoProduct.id = frosmoProduct.name;\n    }\n\n    return frosmoProduct;\n  }\n\n  function _getOgContent(tag) {\n    var metaTag = easy.domElements.selector(\"meta[property=\\\"og:\".concat(tag, \"\\\"]\"))[0];\n\n    if (!metaTag) {\n      return null;\n    }\n\n    return metaTag.getAttribute('content');\n  }\n\n  var EVENT_PRODUCT_VIEW = 'frosmo_product_view';\n  var EVENT_PRODUCT_TRANSACTION = 'frosmo_product_transaction';\n  var EVENT_PRODUCT_CART_ADD = 'frosmo_product_addtocart';\n  var EVENT_PRODUCT_CART_REMOVE = 'frosmo_product_removefromcart';\n  var EVENT_PRODUCT_IMPRESSION = 'frosmo_product_impression';\n  var EVENT_CHECKOUT = 'frosmo_checkout';\n\n  var GA4_DETAIL = 'view_item';\n  var GA4_PURCHASE = 'purchase';\n  var GA4_CART_ADD = 'add_to_cart';\n  var GA4_CART_REMOVE = 'remove_from_cart';\n  var GA4_BEGIN_CHECKOUT = 'begin_checkout';\n  var GA4_ADD_SHIPPING_INFO = 'add_shipping_info';\n  var GA4_ADD_PAYMENT_INFO = 'add_payment_info';\n  var GA4_PRODUCT_IMPRESSION = 'view_promotion';\n  var GA4_ITEMS = 'ecommerce.items';\n\n  function productView(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n\n    if (!Array.isArray(products) || !products.length) {\n      easy.log.error('No products in eventData', 'tracking.productview', {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n\n    var nameEl = easy.domElements.selector('.cd-main .cd-title')[0];\n    var name = nameEl ? nameEl.textContent : '';\n    products[0].name = name;\n\n    var ratingEl = easy.domElements.selector('.cd-main .rates-container')[0];\n    var rating = ratingEl ? ratingEl.dataset.rates : 0;\n    products[0].rating = Number(rating);\n\n    products[0].retailer = products[0].item_category5 || '';\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(function (product) {\n      return product && isValidProduct(product);\n    });\n\n    if (!frosmoProducts.length) {\n      easy.log.error('No valid products in eventData', 'tracking.productview', {\n        debug: JSON.stringify(products)\n      });\n      return;\n    }\n\n    window.dataLayer.push({\n      event: EVENT_PRODUCT_VIEW,\n      products: frosmoProducts\n    });\n  }\n\n  function purchase(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n    var ecommerce = eventData.ecommerce;\n\n    if (!products || !Array.isArray(products) || !ecommerce.value) {\n      easy.log.error('No products or actionField in eventData', 'tracking.productpurchase', {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n    var revenue = Number(ecommerce.value);\n\n    if (isNaN(revenue)) {\n      easy.log.error('Invalid revenue in eventData', 'tracking.productpurchase', {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(isValidProduct);\n    window.dataLayer.push({\n      event: EVENT_PRODUCT_TRANSACTION,\n      id: ecommerce.transaction_id.toString(),\n      revenue: revenue,\n      products: frosmoProducts\n    });\n  }\n\n  function addToCart(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n\n    if (!Array.isArray(products) || !products.length) {\n      easy.log.error('No products in eventData', GA4_CART_ADD, {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(isValidProduct);\n\n    if (!frosmoProducts.length) {\n      easy.log.error('No valid products in eventData', GA4_CART_ADD, {\n        debug: JSON.stringify(products)\n      });\n      return;\n    }\n\n    window.dataLayer.push({\n      event: EVENT_PRODUCT_CART_ADD,\n      products: frosmoProducts\n    });\n  }\n  function removeFromCart(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n\n    if (!Array.isArray(products) || !products.length) {\n      easy.log.error('No products in eventData', GA4_CART_REMOVE);\n      return;\n    }\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(isValidProduct);\n\n    if (!frosmoProducts.length) {\n      easy.log.error('No valid products in eventData', GA4_CART_REMOVE, {\n        debug: JSON.stringify(products)\n      });\n      return;\n    }\n\n    window.dataLayer.push({\n      event: EVENT_PRODUCT_CART_REMOVE,\n      products: frosmoProducts\n    });\n  }\n\n  function checkout(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n\n    if (!products || !Array.isArray(products) || !products.length) {\n      easy.log.error('No products in eventData', eventData.event, {\n        debug: JSON.stringify(eventData)\n      });\n      return;\n    }\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(isValidProduct);\n\n    if (!frosmoProducts.length) {\n      easy.log.error('No valid products in eventData', eventData.event, {\n        debug: JSON.stringify(products)\n      });\n      return;\n    }\n\n    window.dataLayer.push({\n      event: EVENT_CHECKOUT,\n      products: frosmoProducts\n    });\n  }\n\n  function productImpression(eventData) {\n    var products = easy.utils.getByDotString(GA4_ITEMS, eventData);\n\n    if (!Array.isArray(products) || !products.length) {\n      \/*easy.log.error('No products in eventData', 'tracking.productImpression', {\n        debug: JSON.stringify(eventData)\n      });*\/\n      return;\n    }\n\n    var frosmoProducts = products.map(getFrosmoProductData).filter(function (product) {\n      return product && isValidProduct(product);\n    });\n\n    if (!frosmoProducts.length) {\n      easy.log.error('No valid products in eventData', 'tracking.productImpression', {\n        debug: JSON.stringify(products)\n      });\n      return;\n    }\n\n    window.dataLayer.push({\n      event: EVENT_PRODUCT_IMPRESSION,\n      products: frosmoProducts\n    });\n  }\n\n  function handleDataLayer(eventData) {\n    if (eventData.event === GA4_DETAIL) {\n      productView(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_PURCHASE) {\n      purchase(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_CART_ADD) {\n      addToCart(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_CART_REMOVE) {\n      removeFromCart(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_BEGIN_CHECKOUT) {\n      checkout(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_ADD_SHIPPING_INFO) {\n      checkout(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_ADD_PAYMENT_INFO) {\n      checkout(eventData);\n      return;\n    }\n\n    if (eventData.event === GA4_PRODUCT_IMPRESSION) {\n      productImpression(eventData);\n      return;\n    }\n  }\n\n  var MODULE = '[tracking_adapter_ga4]';\n  frosmo.site = frosmo.site || {};\n\n  if (!frosmo.site.trackingAdapterGA4Loaded) {\n    easy.events.on(easy.EVENT_DATALAYER, handleDataLayer);\n    frosmo.site.trackingAdapterGA4Loaded = true;\n    easy.console.log(MODULE, 'Init');\n  } else {\n    easy.console.log(MODULE, 'Init aborted, GA4 tracking adapter already loaded');\n  }\n\n})();","triggerId":8557},{"id":1976,"content":"easy.events.on('TRIGGER_PRODUCT_ADD_TO_CART', function () {\n    setTimeout(function() {\n        easy.domElements.waitFor({\n            selector: '.product-message-modal.active',\n            timeout: 10000\n        })\n        .then(function (els) {\n            easy.events.trigger('FLYOUT_CART_ACTIVE');\n            var upsellEl = easy.domElements.selector('[data-shoppingcart_product_service=\"1\"]', els[els.length -1])[0];\n            if (upsellEl.childElementCount > 0){\n                console.log('UPSELLS_IN_FLYOUT_CART');\n                easy.events.trigger('UPSELLS_IN_FLYOUT_CART');\n                return;\n            }\n\n            easy.events.trigger('NO_UPSELL_IN_FLYOUT_CART');\n        });\n    }, 2000);\n});","triggerId":null},{"id":2724,"content":"var GA4_ID='G-KKVZL7Y0MC';var COMPARISON_GROUP_ID=999;var USER_DECILE=frosmo.easy.uid.getDecilForUid(frosmo.easy.uid.get());var messageOptions={dataFunction:formatMessageData}\nvar events={[easy.EVENT_MESSAGE_SHOW]:messageOptions,[easy.EVENT_MESSAGE_TRUE_DISPLAY]:messageOptions,[easy.EVENT_MESSAGE_CLICK]:messageOptions};function pushEvent(dataFunction,eventType,eventData){gtag('config',GA4_ID,{'send_page_view':false});var event_params=dataFunction(eventData);event_params.event=eventType;event_params.decile=USER_DECILE;gtag('event','Frosmo',event_params);}\nfunction formatMessageData(eventData){var revisionTitle=eventData.revision===COMPARISON_GROUP_ID?'CG':eventData.title;return{modificationId:eventData.id,modificationName:eventData.messageName,variation:eventData.revision,variationTitle:revisionTitle,};}\nfunction gtag(){window.dataLayer.push(arguments);}\neasy.utils.each(Object.keys(events),function(event){easy.events.on(event,pushEvent.bind(null,events[event].dataFunction,event));});","triggerId":8557}],"strategies":{"ab-televizorji-manually-picked":{"contextPaths":[]},"bf-promo-reco---enska-on-":{"contextPaths":[]},"bf-promo-reco--alt-":{"contextPaths":[]},"bf-promo-reco--avdio-":{"contextPaths":[]},"bf-promo-reco--hladilnik-":{"contextPaths":[]},"bf-promo-reco--mo-ka-on-":{"contextPaths":[]},"bf-promo-reco--mobitel-":{"contextPaths":[]},"bf-promo-reco--pralni-stroj-":{"contextPaths":[]},"bf-promo-reco--priprava-hrane-":{"contextPaths":[]},"bf-promo-reco--priprava-kave-":{"contextPaths":[]},"bf-promo-reco--ra--":{"contextPaths":[]},"bf-promo-reco--sesanje-":{"contextPaths":[]},"bf-promo-reco--su-ilni-stroj-":{"contextPaths":[]},"bf-promo-reco--tablice-":{"contextPaths":[]},"bf-promo-reco--tv-":{"contextPaths":[]},"bf-test":{"contextPaths":[]},"bought-together-with-last-product-added-to-cart---100eur":{"contextPaths":["page.cart.ids","user.lastViewed.ids"]},"bought-together-with-last-product-added-to-cart---10eur":{"contextPaths":["page.cart.ids"]},"bought-together-with-last-product-added-to-cart---15eur":{"contextPaths":["page.cart.ids"]},"bought-together-with-last-product-added-to-cart---20eur":{"contextPaths":["page.cart.ids","user.lastViewed.ids"]},"bought-together-with-last-product-added-to-cart---50eur":{"contextPaths":["page.cart.ids","user.lastViewed.ids"]},"bought-together-with-last-product-added-to-cart-no-affinity":{"contextPaths":["page.cart.ids"]},"cart-ancilliaries":{"contextPaths":["page.cart.ids"]},"category-avdio-glasbila-50-affinity":{"contextPaths":[]},"category-avto-moto-gps":{"contextPaths":[]},"category-fitnes-zdravje-dobro-pocutje-50-affinity":{"contextPaths":[]},"category-likanje-sivanje-50-affinity":{"contextPaths":[]},"category-ogrevanje-hlajenje-kvaliteta-zraka-50-affinity":{"contextPaths":[]},"category-osebna-nega-50-affinity":{"contextPaths":[]},"category-pametni-dom-50-affinity":{"contextPaths":[]},"category-pisarna-poslovni-prostori-50-affinity":{"contextPaths":[]},"category-sesanje-ciscenje-50-affinity":{"contextPaths":[]},"category-vse-za-otroke-in-star-e-50-affinity":{"contextPaths":[]},"copy-of-naj-izdelki_tv":{"contextPaths":[]},"digital-voucher-most-popular":{"contextPaths":[]},"digital-voucher-trending":{"contextPaths":[]},"fixed-items--instant-search":{"contextPaths":[]},"fixed-items-template":{"contextPaths":[]},"flyout-cart":{"contextPaths":["page.cart.ids","user.lastViewed.ids","user.lastViewed.categories"]},"flyout-cart-recommendations":{"contextPaths":["user.lastBought.ids"]},"flyout-cart-recommendations--bough-together-":{"contextPaths":["user.lastViewed.ids","user.lastBought.ids"]},"free-shipping-ancillaries":{"contextPaths":["user.lastViewed.categories","user.lastViewed.ids","page.cart.ids"]},"instant-search-ranking":{"contextPaths":[]},"iphone-15-pro":{"contextPaths":[]},"klime-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"mobilni-t-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"most-bought-on-site--50--affinity-":{"contextPaths":[]},"most-bought-on-site--no-affinity-":{"contextPaths":[]},"most-viewed--weeks-most-bought--days-bela-tehnikae-100-affinity":{"contextPaths":[]},"most-viewed--weeks-most-bought--days-bela-tehnikae-50-affinity":{"contextPaths":[]},"most-viewed--weeks-most-bought--days-bela-tehnikae-no-affinity":{"contextPaths":[]},"most-viewed-and-most-bought-24-hours-in-category-no-affinity":{"contextPaths":["page.category.categories"]},"most-viewed-by-visitor-no-affinity":{"contextPaths":["user.mostViewed.ids"]},"most-viewed-in-category-24-hours-no-affinity":{"contextPaths":["page.category.categories"]},"most-viewed-in-dom-vrt":{"contextPaths":[]},"most-viewed-most-bought-100--affinity-dyson":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-most-bought-50--affinity-dyson":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-most-bought-mali-gospodinjski-aparati-100-affinity":{"contextPaths":[]},"most-viewed-most-bought-mali-gospodinjski-aparati-50-affinity":{"contextPaths":[]},"most-viewed-most-bought-mali-gospodinjski-aparati-no-affinity":{"contextPaths":[]},"most-viewed-most-bought-no-affinity-dyson":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-most-bought-ra-unalni-tvo--100-affinity":{"contextPaths":[]},"most-viewed-most-bought-ra-unalni-tvo--50-affinity":{"contextPaths":[]},"most-viewed-most-bought-ra-unalni-tvo--no-affinity":{"contextPaths":[]},"most-viewed-on-site--recent-weeks---no-affinity---is-test-":{"contextPaths":[]},"most-viewed-on-site--recent-weeks---some-affinity---is-test-":{"contextPaths":[]},"most-viewed-on-site-24-hours-no-affinity":{"contextPaths":[]},"most-viewed-on-site-weeks-100-affinity":{"contextPaths":[]},"most-viewed-on-site-weeks-50-affinity":{"contextPaths":[]},"most-viewed-on-site-weeks-no-affinity":{"contextPaths":["user.lastBought.ids"]},"most-viewed-weeks-and-most-bought-days-in-category-100-affinity":{"contextPaths":["page.category.categories"]},"most-viewed-weeks-and-most-bought-days-in-category-50-affinity":{"contextPaths":["page.category.categories"]},"most-viewed-weeks-and-most-bought-days-in-category-no-affinity":{"contextPaths":["page.category.categories"]},"most-viewed-weeks-and-most-bought-days-in-prod-cat-100-affinity":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-weeks-and-most-bought-days-in-prod-cat-50-affinity":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-weeks-and-most-bought-days-in-prod-cat-no-affinity":{"contextPaths":["page.product.id","page.product.category"]},"most-viewed-weeks-most-bought-days-dom-vrt-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-dom-vrt-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-dom-vrt-no-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-foto-kamere-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-foto-kamere-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-foto-kamere-no-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-gaming-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-gaming-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-gaming-no-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-port-prosti-as-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-port-prosti-as-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-port-prosti-as-no-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-telefonija-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-telefonija-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-telefonija-no-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-tv-avdio-100-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-tv-avdio-50-affinity":{"contextPaths":[]},"most-viewed-weeks-most-bought-days-tv-avdio-no-affinity":{"contextPaths":[]},"naj-izdelki_racunalniki":{"contextPaths":[]},"naj-izdelki_tv":{"contextPaths":[]},"pametne-u-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"popular-for-you-no-affinity":{"contextPaths":["user.lastBought.categories","user.lastViewed.categories","page.product.id"]},"popular-in-visitor-last-viewed-category-no-affinity":{"contextPaths":["user.lastViewed.categories","user.lastViewed.ids"]},"pralni-s-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"recently-viewed-by-visitor-no-affinity":{"contextPaths":["user.lastViewed.ids"]},"recommended-for-you-in-current-category-no-affinity":{"contextPaths":["user.lastViewed.ids","page.category.categories"]},"slusalke-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"smart-tv-accessories":{"contextPaths":[]},"tablice-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"top-10-products_av_10-2023":{"contextPaths":["user.lastBought.ids"]},"top-10-products_bt_10-2023":{"contextPaths":[]},"top-10-products_home-page":{"contextPaths":[]},"top-10-products_mga_10-2023":{"contextPaths":[]},"top-10-products_pc_10-2023":{"contextPaths":["user.lastBought.ids"]},"top-10-products_tablice_10-2023":{"contextPaths":[]},"top-10-products_telefonija_10-2023":{"contextPaths":["user.lastBought.ids"]},"top-10-products_tv_10-2023":{"contextPaths":["user.lastBought.ids"]},"top-10-vrtni-stoli":{"contextPaths":[]},"top-3-products_ra--komp_10-2023":{"contextPaths":[]},"tv-most-viewed-weeks-and-most-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]},"viewed-and-bought-together-with-product-category-no-affinity":{"contextPaths":["page.product.id"]},"viewed-together-and-bought-together-with-current-product---dyson":{"contextPaths":["page.product.id"]},"viewed-together-with-category-100-affinity":{"contextPaths":["page.category.categories"]},"viewed-together-with-category-50-affinity":{"contextPaths":["page.category.categories"]},"viewed-together-with-category-no-affinity":{"contextPaths":["page.category.categories"]},"viewed-together-with-items-recently-viewed---cart":{"contextPaths":["user.lastViewed.ids","page.cart.ids"]},"viewed-together-with-search-results-no-affinity":{"contextPaths":["page.search.ids","page.search.categories"]},"zvocne-p-viewed-weeks-bought-days-category-50-affinity":{"contextPaths":["page.category.categories"]}},"smartDiscoveryStrategies":{"category":{"contextPaths":["page.category.categories"]},"home":{"contextPaths":[]}}};


    _frosmo.initFunction = function () {
        frosmo.easy.CUSTOM_SCRIPT_UPDATED_AT = '2024-04-16T05:40:08+00:00';
        frosmo.easy.api.init(_config.api.domain, _config.api.origin);

        if (frosmo.easy.versionAtLeast('24.6.0', frosmo.easy.VERSION)) {
            frosmo.easy.VERSION_RULES = 3.6;
            

            "cbfd724ade2a75f3a4d62a93fa1eef9871445e8e";
(function(){function w(d,l){l(z)}var z={};w.amd=!0;(function(d,l){"function"===typeof w&&w.amd?l(z):(d.Mustache={},l(d.Mustache))})(this,function(d){function l(a){return"function"===typeof a}function t(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function p(a,c){return null!=a&&"object"===typeof a&&c in a}function w(a,c){function b(a){"string"===typeof a&&(a=a.split(E,2));if(!B(a)||2!==a.length)throw Error("Invalid tags: "+a);l=new RegExp(t(a[0])+"\\s*");g=new RegExp("\\s*"+t(a[1]));
p=new RegExp("\\s*"+t("}"+a[1]))}if(!a)return[];var e=[],m=[],n=[],h=!1,f=!1,l,g,p;b(c||d.tags);for(var q=new A(a),u,k,r,x;!q.eos();){u=q.pos;if(r=q.scanUntil(l)){x=0;for(var v=r.length;x<v;++x)if(k=r.charAt(x),F.call(G,k)?f=!0:n.push(m.length),m.push(["text",k,u,u+1]),u+=1,"\n"===k){if(h&&!f)for(;n.length;)delete m[n.pop()];else n=[];f=h=!1}}if(!q.scan(l))break;h=!0;k=q.scan(H)||"name";q.scan(I);"="===k?(r=q.scanUntil(D),q.scan(D),q.scanUntil(g)):"{"===k?(r=q.scanUntil(p),q.scan(J),q.scanUntil(g),
k="&"):r=q.scanUntil(g);if(!q.scan(g))throw Error("Unclosed tag at "+q.pos);x=[k,r,u,q.pos];m.push(x);if("#"===k||"^"===k)e.push(x);else if("/"===k){k=e.pop();if(!k)throw Error('Unopened section "'+r+'" at '+u);if(k[1]!==r)throw Error('Unclosed section "'+k[1]+'" at '+u);}else"name"===k||"{"===k||"&"===k?f=!0:"="===k&&b(r)}if(k=e.pop())throw Error('Unclosed section "'+k[1]+'" at '+q.pos);return z(y(m))}function y(a){for(var c=[],b,e,m=0,d=a.length;m<d;++m)if(b=a[m])"text"===b[0]&&e&&"text"===e[0]?
(e[1]+=b[1],e[3]=b[3]):(c.push(b),e=b);return c}function z(a){for(var c=[],b=c,e=[],m,d=0,h=a.length;d<h;++d)switch(m=a[d],m[0]){case "#":case "^":b.push(m);e.push(m);b=m[4]=[];break;case "/":b=e.pop();b[5]=m[2];b=0<e.length?e[e.length-1][4]:c;break;default:b.push(m)}return c}function A(a){this.tail=this.string=a;this.pos=0}function v(a,c){this.view=a;this.cache={".":this.view};this.parent=c}function g(){this.cache={}}var K=Object.prototype.toString,B=Array.isArray||function(a){return"[object Array]"===
K.call(a)},F=RegExp.prototype.test,G=/\S/,L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},I=/\s*/,E=/\s+/,D=/\s*=/,J=/\s*\}/,H=/#|\^|\/|>|\{|&|=|!/;A.prototype.eos=function(){return""===this.tail};A.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};A.prototype.scanUntil=function(a){a=this.tail.search(a);var c;switch(a){case -1:c=this.tail;this.tail=
"";break;case 0:c="";break;default:c=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=c.length;return c};v.prototype.push=function(a){return new v(a,this)};v.prototype.lookup=function(a){var c=this.cache,b;if(c.hasOwnProperty(a))b=c[a];else{for(var e=this,d,n,h=!1;e;){if(0<a.indexOf("."))for(b=e.view,d=a.split("."),n=0;null!=b&&n<d.length;)n===d.length-1&&(h=p(b,d[n])),b=b[d[n++]];else b=e.view[a],h=p(e.view,a);if(h)break;e=e.parent}c[a]=b}l(b)&&(b=b.call(this.view));return b};
g.prototype.clearCache=function(){this.cache={}};g.prototype.parse=function(a,c){var b=this.cache,e=b[a];null==e&&(e=b[a]=w(a,c));return e};g.prototype.render=function(a,c,b){var e=this.parse(a);c=c instanceof v?c:new v(c);return this.renderTokens(e,c,b,a)};g.prototype.renderTokens=function(a,c,b,e){for(var d="",n,h,f,g=0,l=a.length;g<l;++g)f=void 0,n=a[g],h=n[0],"#"===h?f=this.renderSection(n,c,b,e):"^"===h?f=this.renderInverted(n,c,b,e):">"===h?f=this.renderPartial(n,c,b,e):"&"===h?f=this.unescapedValue(n,
c):"name"===h?f=this.escapedValue(n,c):"text"===h&&(f=this.rawValue(n)),void 0!==f&&(d+=f);return d};g.prototype.renderSection=function(a,c,b,d){function m(a){return g.render(a,c,b)}var g=this,h="",f=c.lookup(a[1]);if(f){if(B(f))for(var p=0,t=f.length;p<t;++p)h+=this.renderTokens(a[4],c.push(f[p]),b,d);else if("object"===typeof f||"string"===typeof f||"number"===typeof f)h+=this.renderTokens(a[4],c.push(f),b,d);else if(l(f)){if("string"!==typeof d)throw Error("Cannot use higher-order sections without the original template");
f=f.call(c.view,d.slice(a[3],a[5]),m);null!=f&&(h+=f)}else h+=this.renderTokens(a[4],c,b,d);return h}};g.prototype.renderInverted=function(a,c,b,d){var g=c.lookup(a[1]);if(!g||B(g)&&0===g.length)return this.renderTokens(a[4],c,b,d)};g.prototype.renderPartial=function(a,c,b){if(b&&(a=l(b)?b(a[1]):b[a[1]],null!=a))return this.renderTokens(this.parse(a),c,b,a)};g.prototype.unescapedValue=function(a,c){var b=c.lookup(a[1]);if(null!=b)return b};g.prototype.escapedValue=function(a,c){var b=c.lookup(a[1]);
if(null!=b)return d.escape(b)};g.prototype.rawValue=function(a){return a[1]};d.name="mustache.js";d.version="2.3.0";d.tags=["{{","}}"];var C=new g;d.clearCache=function(){return C.clearCache()};d.parse=function(a,c){return C.parse(a,c)};d.render=function(a,c,b){if("string"!==typeof a)throw c=TypeError,a=B(a)?"array":typeof a,new c('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');return C.render(a,c,b)};d.to_html=
function(a,c,b,e){a=d.render(a,c,b);if(l(e))e(a);else return a};d.escape=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return L[a]})};d.Scanner=A;d.Context=v;d.Writer=g;return d});frosmo.easy.template=function(d){var l={};return{addFormatter:function(d,p){l[d]=p},get:function(l){var p=d.config.templates[l];if(void 0===p)throw Error('Invalid "name" argument, for "'+l+'"');return p},render:function(t,p,w,y){y=d.utils.extend({},y,{type:d.ERROR_TYPE_TEMPLATE_EXCEPTION,module:"[template]"});
return d.guard(function(){if(!d.utils.isString(t))throw Error('Invalid type for "template" argument, got "'+d.utils.getType(t)+'"');if(!d.utils.isObject(p))throw Error('Invalid type for "view" argument, got "'+d.utils.getType(p)+'"');var y=d.utils.extend(d.utils.clone(p),l);return z.render(t,y,w)},y)()}}}(frosmo.easy)})();

"cbfd724ade2a75f3a4d62a93fa1eef9871445e8e";
frosmo.easy.tracking=function(c){function h(a,b){if(!c.utils.isString(a)||0===a.length||128<a.length)throw c.internal.createLogError('Invalid event "action" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(a),action:a,payload:b}),module:"[tracking]"});if(void 0!==b){if(!c.utils.isPlainObject(b)||2048<frosmo.JSON.stringify(b).length)throw c.internal.createLogError('Invalid event "payload" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b),
action:a,payload:b}),module:"[tracking]"});e("modificationId",b);e("variationId",b)}}function e(a,b){if(void 0!==b[a]&&(!c.utils.isInteger(b[a])||0>=b[a]))throw c.internal.createLogError('Invalid event payload property of "'+a+'"',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b[a]),name:a,payload:b}),module:"[tracking]"});}function k(a,b){if(!c.utils.isString(a)||0===a.length||128<a.length)throw c.internal.createLogError('Invalid data "action" argument',c.ERROR_TYPE_ARG_INVALID,
{debug:frosmo.JSON.stringify({dataType:c.utils.getType(a),action:a,payload:b}),module:"[tracking]"});if(void 0!==b&&(!c.utils.isPlainObject(b)||2048<frosmo.JSON.stringify(b).length))throw c.internal.createLogError('Invalid data "payload" argument',c.ERROR_TYPE_ARG_INVALID,{debug:frosmo.JSON.stringify({dataType:c.utils.getType(b),action:a,payload:b}),module:"[tracking]"});}function f(a,b,d){a={type:a,sessionStart:c.api.getSessionStart(),action:b};d&&(a.payload=frosmo.JSON.stringify(d));return c.api.getCallUrl("tracking",
a)}function g(a){var b=c.api.getCallId();c.internal.sendBeacon(a+"&"+b,!0)}return{event:function(a,b){h(a,b);c.ready(function(){var d=c.utils.isPlainObject(b)?c.utils.clone(b):{},d=f("event",a,{modificationId:d.modificationId||0,variationId:d.variationId||0});g(d)})},data:function(a,b){k(a,b);c.ready(function(){var c=f("data",a,b);g(c)})}}}(frosmo.easy);

"1ae26002d9528a4413fe8225d325e3b9d40c152a";
frosmo.easy.smartDiscovery=function(b){function l(){b.utils.each(g,function(a){var c=b.strategies.getContext();m(a,c)&&k(a,c)})}function m(a,c){var d=b.utils.every(a.contextPaths,function(a){a=b.utils.getByDotString(a,c,{empty:!1,nonObjects:!1});return b.utils.isArray(a)&&0<a.length||b.utils.isString(a)&&0<a.length?!0:!1});d||(b.debug.addEntry("smartDiscovery",{type:"missing.contextPaths",strategyOrPageType:a.strategyOrPageType,contextPaths:a.contextPaths,options:b.guard.current()}),b.console.debug("[smartDiscovery]",
'Strategy id string or page type "'+a.strategyOrPageType+'" does not have all context paths defined',a));return d}function k(a,c){g=b.utils.filter(g,function(b){return b!==a});var d=b.internal.getProfile();b.profile&&d===b.profile.OPT_OUT&&(c.user=void 0);var e=b.api.getApiUrl("smartDiscovery"),f={method:a.method,origin:b.config.api.origin,cookieId:b.uid.get(),strategy:a.strategyOrPageType,pageType:a.strategyOrPageType,context:frosmo.JSON.stringify(c),ver:b.getVersion(),debug:a.options.debug};0<a.options.limit&&
(f.limit=a.options.limit);d&&(f.profile=d);a.apiFetch=b.fetch.get(e,{params:f,timeout:a.options.timeout});a.apiFetch.then(a.resolvers.resolve).catch(function(c){var d=String(c),e=b.ERROR_TYPE_AJAX_EXCEPTION;b.utils.isObject(c.errorThrown)&&(d=c.errorThrown.text,e=c.errorThrown.type);b.log.error(d,e,{debug:frosmo.JSON.stringify({method:a.method,strategyOrPageType:a.strategyOrPageType,options:a.options})});a.resolvers.reject(c)}).finally(function(){h=b.utils.filter(h,function(b){return b!==a})});h.push(a);
return a.resolvers.promise}var f,g=[],h=[];return{init:function(a){f=a;b.events.on("strategies.setPageContext",l)},clear:function(){b.events.off("strategies.setPageContext",l);b.utils.each(g,function(a){a.resolvers.promise.cancel(Error('Smart Discovery for strategy or page type "'+a.strategyOrPageType+'" was cancelled, due to the clearing of all pending Smart Discovery requests'))});g=[];b.utils.each(h,function(a){a.apiFetch.cancel(Error('Smart Discovery for strategy or page type "'+a.strategyOrPageType+
'" was cancelled, due to the clearing of all in progress Smart Discovery requests'))});h=[]},fetch:function(a,c){c=b.utils.extend({limit:void 0,timeout:void 0,debug:b.isDev()},c);var d={method:"strategy",strategyOrPageType:a,options:c,contextPaths:f[a]?f[a].contextPaths:[],resolvers:b.Promise.withResolvers()};if(!f[a]){var e=["home","brand","category"];if(!b.utils.inArray(e,a))throw Error('Invalid page type, got "'+a+'", expected one of: "'+e.join('", "')+'"');d.method="fetch";a:switch(a){case "brand":e=
["page.brand.name"];break a;case "category":e=["page.category.categories"];break a;default:e=[]}d.contextPaths=e}e=b.strategies.getContext();if(m(d,e))return k(d,e);g.push(d);return d.resolvers.promise},fetchWithCategory:function(a,c){if(!b.utils.isString(a)||0===a.length)throw Error('Invalid type for "category" argument, got "'+b.utils.getType(a)+'" for "'+frosmo.JSON.stringify(a)+'", expected to be a non-empty "string" type');c=b.utils.extend({limit:void 0,timeout:void 0,debug:b.isDev()},c);var d=
{method:"fetch",strategyOrPageType:"category",options:c,contextPaths:[],resolvers:b.Promise.withResolvers()};return k(d,{page:{category:{categories:[a]}}})}}}(frosmo.easy);

"ca04a232e471632c61c7d2046046cf72c3c4f17a";
frosmo.easy.strategies=function(b){function l(){b.utils.each(g,function(a){var b=m();q(a,b)&&r(a,b)})}function q(a,c){var f=b.utils.every(a.contextPaths,function(a){a=b.utils.getByDotString(a,c,{empty:!1,nonObjects:!1});return b.utils.isArray(a)||b.utils.isString(a)&&0<a.length?!0:!1});f||(b.debug.addEntry("strategies",{type:"missing.contextPaths",strategy:a.strategy,contextPaths:a.contextPaths,options:b.guard.current()}),b.console.debug("[strategies]",'Strategy id string "'+a.strategy+'" does not have all context paths defined',
a));return f}function r(a,c){g=b.utils.filter(g,function(b){return b!==a});var f=b.internal.getProfile();b.profile&&f===b.profile.OPT_OUT&&(c.user=void 0);var d=b.api.getApiUrl("reco")+"/v2",e={method:"strategy",origin:b.config.api.origin,cookieId:b.uid.get(),strategy:a.strategy,context:frosmo.JSON.stringify(c),shuffle:a.options.shuffle,variants:a.options.variants,ver:b.getVersion(),debug:a.options.debug};f&&(e.profile=f);a.apiFetch=b.fetch.get(d,{params:e,timeout:a.options.timeout});a.apiFetch.then(a.resolvers.resolve).catch(function(c){var f=
String(c),d=b.ERROR_TYPE_AJAX_EXCEPTION;b.utils.isObject(c.errorThrown)&&(f=c.errorThrown.text,d=c.errorThrown.type);b.log.error(f,d,{debug:frosmo.JSON.stringify({strategy:a.strategy,options:a.options})});a.resolvers.reject(c)}).finally(function(){h=b.utils.filter(h,function(b){return b!==a})});h.push(a);return a.resolvers.promise}function m(){var a=d,b;b=frosmo.site&&frosmo.site.userInterest?{area:frosmo.site.getUserArea?frosmo.site.getUserArea():"",lastBought:{ids:e(frosmo.site.lastBoughtProducts(),
20),categories:e(frosmo.site.lastBoughtCategories(),3)},lastViewed:{ids:e(frosmo.site.recentProducts(),20),categories:e(frosmo.site.recentCategories(),3)},mostViewed:{ids:e(frosmo.site.topViewedProducts(),20),categories:e(frosmo.site.topViewedCategories(),3)}}:void 0;return{page:a,user:b}}function e(a,c){return b.utils.map(a,function(a){return a.id}).slice(0,c)}function n(a,c,f){if(!b.utils.isString(a))throw Error('Invalid type for "'+c+'" argument, got "'+b.utils.getType(a)+'" for "'+frosmo.JSON.stringify(a)+
'"');if(f&&0===a.length)throw Error('Invalid length for "'+c+'" argument, got "'+a.length+'", expected to be a non-empty "string" type');}function k(a,c){if(!b.utils.isArray(a))throw Error('Invalid type for "'+c+'" argument, got "'+b.utils.getType(a)+'" for "'+frosmo.JSON.stringify(a)+'"');b.utils.each(a,function(a){n(a,c,!1)})}var p,d,g=[],h=[];return{init:function(a){p=a;d={};b.events.once("frosmo_userInterest_ready",l);b.events.on("strategies.setPageContext",l)},clear:function(){b.events.off("frosmo_userInterest_ready",
l);b.events.off("strategies.setPageContext",l);b.events.clearEvent("strategies.setPageContext");b.utils.each(g,function(a){a.resolvers.promise.cancel(Error('Strategy "'+a.strategy+'" was cancelled, due to the clearing of all pending strategy requests'))});g=[];b.utils.each(h,function(a){a.apiFetch.cancel(Error('Strategy "'+a.strategy+'" was cancelled, due to the clearing of all in progress strategy requests'))});h=[];d={}},fetch:function(a,c){c=b.utils.extend({shuffle:!1,variants:!1,timeout:void 0,
debug:b.isDev()},c);var d={strategy:a,options:c,contextPaths:p[a]?p[a].contextPaths:[],resolvers:b.Promise.withResolvers()},e=m();if(q(d,e))return r(d,e);g.push(d);return d.resolvers.promise},getContext:m,setPageBrandContext:function(a){n(a,"name",!0);b.utils.extend(d,{brand:{name:a}});b.events.trigger("strategies.setPageContext")},setPageCartContext:function(a){k(a,"ids");b.utils.extend(d,{cart:{ids:a}});b.events.trigger("strategies.setPageContext")},setPageCategoryContext:function(a){if(1===arguments.length&&
b.utils.isArray(a))k(a,"categories"),b.utils.extend(d,{category:{categories:a}});else{b.log.error("easy.strategies.setPageCategoryContext(name, categories) should be easy.strategies.setPageCategoryContext(categories)",b.ERROR_TYPE_DEPRECATED+".removed");var c=arguments[0];a=arguments[1];n(c,"name",!1);k(a,"categories");b.utils.extend(d,{category:{name:c,categories:a}})}b.events.trigger("strategies.setPageContext")},setPageHomeContext:function(){b.utils.extend(d,{});b.events.trigger("strategies.setPageContext")},
setPageOtherContext:function(){b.utils.extend(d,{});b.events.trigger("strategies.setPageContext")},setPageProductContext:function(a){if(!b.utils.isPlainObject(a)||void 0===a.id||!b.utils.isString(a.id)||void 0===a.category||!b.utils.isString(a.category))throw Error('Invalid product, got "'+frosmo.JSON.stringify(a)+'"');b.utils.extend(d,{product:a});b.events.trigger("strategies.setPageContext")},setPageSearchContext:function(a,c){k(a,"ids");k(c,"categories");b.utils.extend(d,{search:{ids:a,categories:c}});
b.events.trigger("strategies.setPageContext")}}}(frosmo.easy);

            

            frosmo.easy.guard(function () {
                frosmo.easy.init(_config);
            }, { type: frosmo.easy.ERROR_TYPE_CORE_INIT, module: frosmo.easy.MODULE_CORE })();
            if (!frosmo.easy.workspaces) {
                frosmo.easy.log.send('Workspaces module not found', frosmo.easy.ERROR_TYPE_MODULE_MISSING, {
                    level: frosmo.easy.LOG_LEVEL_CRITICAL
                });
            }
        } else {
            frosmo.easy.log.warn('Invalid minimum Frosmo Core version, expected 24.6.0', frosmo.easy.ERROR_TYPE_VERSION_INVALID);
        }
    }

    "cbfd724ade2a75f3a4d62a93fa1eef9871445e8e";
_frosmo.workspaces=function(l,m){function h(){try{var a=document.cookie.match(new RegExp(d+"=(\\d+)"));return a?Number(a[1]):0}catch(b){return 0}}function k(a){if(isNaN(a-parseFloat(a))||0>=a)throw Error('Invalid "workspaceId" argument of "'+a+'"');n(d,a,14)}function g(){n(d,"",-1);window.location.hash&&(window.location.hash.indexOf("activate_fws")||window.location.hash.indexOf("deactivate_fws"))&&(window.location.hash="")}function p(a){frosmo.easy.utils.waitFor(100,5E3,function(){return document.body&&
_frosmo.workspaceId===a}).then(function(){var b=document.createElement("div");b.innerHTML='<div id="COOKIE_NAME" style="background: #000; border-radius: 250px; border: 5px solid #ffb347; color: #fff; cursor: move; font-family: sans-serif; font-size: 1.5em; height: 100px; line-height: 95px; position: fixed; right: 50px; text-align: center; top: 50px; user-select: none; width: 100px; z-index: 999999;"><div id="COOKIE_NAME_close" style="display: flex; align-items: center; justify-content: center; background: #000; border-radius: 30px; border: 5px solid #ffb347; color: #ffb347; cursor: pointer; height: 50px; left: 80px; margin: 0; padding: 0; position: absolute; top: -10px; width: 50px;" title="Deactivate workspace preview.">&#xD7;</div><span id="COOKIE_NAME_content">-</span></div>'.replace(/COOKIE_NAME/g,
d);var b=b.firstChild,f=frosmo.easy.domElements.selector("#"+d+"_close",b)[0];frosmo.easy.domElements.selector("#"+d+"_content",b)[0].textContent=a;b.title="Previewing Frosmo workspace #"+a+". To hide this indicator, double-click or tap it.";_frosmo.workspaceScript&&(b.style.borderStyle="dashed",f.style.borderStyle="dashed",b.title+="\nNote: Using the workspace script");document.body.appendChild(b);r(b,f)}).catch(function(b){frosmo.easy.console.error("[workspaces]",'Unable to load the workspaces indicator for workspace id "'+
a+'", loaded id was "'+_frosmo.workspaceId+'"');frosmo.easy.console.error("[workspaces]",b)})}function r(a,b){var f=a.style.zIndex,c=0;frosmo.easy.domEvents.on(a,"click.workspaces",function(){var b=Date.now();if(frosmo.easy.utils.isMobile()||500>b-c)a.style.display="none",frosmo.easy.domEvents.off(a,"*.workspaces");c=b});frosmo.easy.domEvents.on(a,"mousedown.workspaces",function(b){function c(b){a.style.left=b.pageX-d+"px";a.style.top=b.pageY-g+"px"}var e=a.getBoundingClientRect(),d=b.clientX-e.left,
g=b.clientY-e.top;a.style.position="fixed";a.style.zIndex=f;frosmo.easy.domEvents.on(document,"mousemove.workspaces",c);frosmo.easy.domEvents.once(a,"mouseup.workspaces",function(){frosmo.easy.domEvents.off(document,"mousemove.workspaces",c)})});frosmo.easy.domEvents.on(b,"click.workspaces",function(){g();a.style.display="none";frosmo.easy.domEvents.off(a,"*.workspaces")})}function q(a){if(a=a.match(/#(activate_fws|deactivate_fws)(?:_(\d+))?/))switch(a[1]){case "activate_fws":a=Number(a[2]);0<a&&
k(a);break;case "deactivate_fws":g()}}function n(a,b,f){var c="";f&&(c=new Date,c.setTime(c.getTime()+864E5*f),c="; expires="+c.toGMTString());try{document.cookie=escape(a)+"="+escape(b)+c+"; path=/"}catch(d){}}var d=m+"_ws_id";q(location.href);return{init:function(a,b,d){var c=h();if(0!==c){var k=!document.currentScript||!document.currentScript.async;_frosmo.initFunction=function(){var a="//"+b+"/sites/"+d+"_"+c+".js";k&&document.write('<script onerror="'+m+'.easy.workspaces.deactivate()" src="'+
a+'" data-namespace="'+l+'">\x3c/script>');var e=frosmo.easy.domElements.selector('[src="'+a+'"]')[0];if(e&&frosmo.easy.events.isTriggered(frosmo.easy.EVENT_SCRIPT_LOAD))p(c);else{e&&e.parentNode.removeChild(e);var h=this,e=frosmo.easy.domElements.addScriptTag(a,!1,function(){p(c);frosmo.easy.events.isTriggered(frosmo.easy.EVENT_SCRIPT_LOAD)||frosmo.easy.runGuarded(_frosmo.initFunction,{context:h})});e.setAttribute("data-namespace",l);frosmo.easy.domEvents.once(e,"error",g)}}}},getId:h,activate:k,
deactivate:g,_testHandleLocationHash:q}}(_frosmoScriptNamespace,_frosmoNamespace);

    if (_frosmo.workspaces) {
        _frosmo.workspaces.init(location.href, 'd2wzl9lnvjz3bh.cloudfront.net', 'bigbang_si');
    }
    if (frosmo.easy && frosmo.easy.guard && !_frosmo.initialized) {
        frosmo.easy.workspaces = _frosmo.workspaces;
        frosmo.easy.guard(_frosmo.initFunction)();
        _frosmo.initialized = !frosmo.easy.workspaces.getId();
    }
}());
